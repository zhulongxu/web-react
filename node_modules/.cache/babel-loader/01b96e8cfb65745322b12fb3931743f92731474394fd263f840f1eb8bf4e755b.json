{"ast":null,"code":"import { Point } from '@antv/x6-geometry';\nimport { ModifierKey } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nexport class Vertices extends ToolsView.ToolItem {\n  constructor() {\n    super(...arguments);\n    this.handles = [];\n  }\n  get vertices() {\n    return this.cellView.cell.getVertices();\n  }\n  onRender() {\n    this.addClass(this.prefixClassName('edge-tool-vertices'));\n    if (this.options.addable) {\n      this.updatePath();\n    }\n    this.resetHandles();\n    this.renderHandles();\n    return this;\n  }\n  update() {\n    const vertices = this.vertices;\n    if (vertices.length === this.handles.length) {\n      this.updateHandles();\n    } else {\n      this.resetHandles();\n      this.renderHandles();\n    }\n    if (this.options.addable) {\n      this.updatePath();\n    }\n    return this;\n  }\n  resetHandles() {\n    const handles = this.handles;\n    this.handles = [];\n    if (handles) {\n      handles.forEach(handle => {\n        this.stopHandleListening(handle);\n        handle.remove();\n      });\n    }\n  }\n  renderHandles() {\n    const vertices = this.vertices;\n    for (let i = 0, l = vertices.length; i < l; i += 1) {\n      const vertex = vertices[i];\n      const createHandle = this.options.createHandle;\n      const processHandle = this.options.processHandle;\n      const handle = createHandle({\n        index: i,\n        graph: this.graph,\n        guard: evt => this.guard(evt),\n        attrs: this.options.attrs || {}\n      });\n      if (processHandle) {\n        processHandle(handle);\n      }\n      handle.updatePosition(vertex.x, vertex.y);\n      this.stamp(handle.container);\n      this.container.appendChild(handle.container);\n      this.handles.push(handle);\n      this.startHandleListening(handle);\n    }\n  }\n  updateHandles() {\n    const vertices = this.vertices;\n    for (let i = 0, l = vertices.length; i < l; i += 1) {\n      const vertex = vertices[i];\n      const handle = this.handles[i];\n      if (handle) {\n        handle.updatePosition(vertex.x, vertex.y);\n      }\n    }\n  }\n  updatePath() {\n    const connection = this.childNodes.connection;\n    if (connection) {\n      connection.setAttribute('d', this.cellView.getConnectionPathData());\n    }\n  }\n  startHandleListening(handle) {\n    const edgeView = this.cellView;\n    if (edgeView.can('vertexMovable')) {\n      handle.on('change', this.onHandleChange, this);\n      handle.on('changing', this.onHandleChanging, this);\n      handle.on('changed', this.onHandleChanged, this);\n    }\n    if (edgeView.can('vertexDeletable')) {\n      handle.on('remove', this.onHandleRemove, this);\n    }\n  }\n  stopHandleListening(handle) {\n    const edgeView = this.cellView;\n    if (edgeView.can('vertexMovable')) {\n      handle.off('change', this.onHandleChange, this);\n      handle.off('changing', this.onHandleChanging, this);\n      handle.off('changed', this.onHandleChanged, this);\n    }\n    if (edgeView.can('vertexDeletable')) {\n      handle.off('remove', this.onHandleRemove, this);\n    }\n  }\n  getNeighborPoints(index) {\n    const edgeView = this.cellView;\n    const vertices = this.vertices;\n    const prev = index > 0 ? vertices[index - 1] : edgeView.sourceAnchor;\n    const next = index < vertices.length - 1 ? vertices[index + 1] : edgeView.targetAnchor;\n    return {\n      prev: Point.create(prev),\n      next: Point.create(next)\n    };\n  }\n  getMouseEventArgs(evt) {\n    const e = this.normalizeEvent(evt);\n    const {\n      x,\n      y\n    } = this.graph.snapToGrid(e.clientX, e.clientY);\n    return {\n      e,\n      x,\n      y\n    };\n  }\n  onHandleChange({\n    e\n  }) {\n    this.focus();\n    const edgeView = this.cellView;\n    edgeView.cell.startBatch('move-vertex', {\n      ui: true,\n      toolId: this.cid\n    });\n    if (!this.options.stopPropagation) {\n      const {\n        e: evt,\n        x,\n        y\n      } = this.getMouseEventArgs(e);\n      this.eventData(evt, {\n        start: {\n          x,\n          y\n        }\n      });\n      edgeView.notifyMouseDown(evt, x, y);\n    }\n  }\n  onHandleChanging({\n    handle,\n    e\n  }) {\n    const edgeView = this.cellView;\n    const index = handle.options.index;\n    const {\n      e: evt,\n      x,\n      y\n    } = this.getMouseEventArgs(e);\n    const vertex = {\n      x,\n      y\n    };\n    this.snapVertex(vertex, index);\n    edgeView.cell.setVertexAt(index, vertex, {\n      ui: true,\n      toolId: this.cid\n    });\n    handle.updatePosition(vertex.x, vertex.y);\n    if (!this.options.stopPropagation) {\n      edgeView.notifyMouseMove(evt, x, y);\n    }\n  }\n  stopBatch(vertexAdded) {\n    this.cell.stopBatch('move-vertex', {\n      ui: true,\n      toolId: this.cid\n    });\n    if (vertexAdded) {\n      this.cell.stopBatch('add-vertex', {\n        ui: true,\n        toolId: this.cid\n      });\n    }\n  }\n  onHandleChanged({\n    e\n  }) {\n    const options = this.options;\n    const edgeView = this.cellView;\n    if (options.addable) {\n      this.updatePath();\n    }\n    if (!options.removeRedundancies) {\n      this.stopBatch(this.eventData(e).vertexAdded);\n      return;\n    }\n    const verticesRemoved = edgeView.removeRedundantLinearVertices({\n      ui: true,\n      toolId: this.cid\n    });\n    if (verticesRemoved) {\n      this.render();\n    }\n    this.blur();\n    this.stopBatch(this.eventData(e).vertexAdded);\n    const {\n      e: evt,\n      x,\n      y\n    } = this.getMouseEventArgs(e);\n    if (!this.options.stopPropagation) {\n      edgeView.notifyMouseUp(evt, x, y);\n      const {\n        start\n      } = this.eventData(evt);\n      if (start) {\n        const {\n          x: startX,\n          y: startY\n        } = start;\n        if (startX === x && startY === y) {\n          edgeView.onClick(evt, x, y);\n        }\n      }\n    }\n    edgeView.checkMouseleave(evt);\n    options.onChanged && options.onChanged({\n      edge: edgeView.cell,\n      edgeView\n    });\n  }\n  snapVertex(vertex, index) {\n    const snapRadius = this.options.snapRadius || 0;\n    if (snapRadius > 0) {\n      const neighbors = this.getNeighborPoints(index);\n      const prev = neighbors.prev;\n      const next = neighbors.next;\n      if (Math.abs(vertex.x - prev.x) < snapRadius) {\n        vertex.x = prev.x;\n      } else if (Math.abs(vertex.x - next.x) < snapRadius) {\n        vertex.x = next.x;\n      }\n      if (Math.abs(vertex.y - prev.y) < snapRadius) {\n        vertex.y = neighbors.prev.y;\n      } else if (Math.abs(vertex.y - next.y) < snapRadius) {\n        vertex.y = next.y;\n      }\n    }\n  }\n  onHandleRemove({\n    handle,\n    e\n  }) {\n    if (this.options.removable) {\n      const index = handle.options.index;\n      const edgeView = this.cellView;\n      edgeView.cell.removeVertexAt(index, {\n        ui: true\n      });\n      if (this.options.addable) {\n        this.updatePath();\n      }\n      edgeView.checkMouseleave(this.normalizeEvent(e));\n    }\n  }\n  allowAddVertex(e) {\n    const guard = this.guard(e);\n    const addable = this.options.addable && this.cellView.can('vertexAddable');\n    const matchModifiers = this.options.modifiers ? ModifierKey.isMatch(e, this.options.modifiers) : true;\n    return !guard && addable && matchModifiers;\n  }\n  onPathMouseDown(evt) {\n    const edgeView = this.cellView;\n    if (!this.allowAddVertex(evt)) {\n      return;\n    }\n    evt.stopPropagation();\n    evt.preventDefault();\n    const e = this.normalizeEvent(evt);\n    const vertex = this.graph.snapToGrid(e.clientX, e.clientY).toJSON();\n    edgeView.cell.startBatch('add-vertex', {\n      ui: true,\n      toolId: this.cid\n    });\n    const index = edgeView.getVertexIndex(vertex.x, vertex.y);\n    this.snapVertex(vertex, index);\n    edgeView.cell.insertVertex(vertex, index, {\n      ui: true,\n      toolId: this.cid\n    });\n    this.render();\n    const handle = this.handles[index];\n    this.eventData(e, {\n      vertexAdded: true\n    });\n    handle.onMouseDown(e);\n  }\n  onRemove() {\n    this.resetHandles();\n  }\n}\n(function (Vertices) {\n  class Handle extends View {\n    get graph() {\n      return this.options.graph;\n    }\n    constructor(options) {\n      super();\n      this.options = options;\n      this.render();\n      this.delegateEvents({\n        mousedown: 'onMouseDown',\n        touchstart: 'onMouseDown',\n        dblclick: 'onDoubleClick'\n      });\n    }\n    render() {\n      this.container = View.createElement('circle', true);\n      const attrs = this.options.attrs;\n      if (typeof attrs === 'function') {\n        const defaults = Vertices.getDefaults();\n        this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n      } else {\n        this.setAttrs(attrs);\n      }\n      this.addClass(this.prefixClassName('edge-tool-vertex'));\n    }\n    updatePosition(x, y) {\n      this.setAttrs({\n        cx: x,\n        cy: y\n      });\n    }\n    onMouseDown(evt) {\n      if (this.options.guard(evt)) {\n        return;\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n      this.graph.view.undelegateEvents();\n      this.delegateDocumentEvents({\n        mousemove: 'onMouseMove',\n        touchmove: 'onMouseMove',\n        mouseup: 'onMouseUp',\n        touchend: 'onMouseUp',\n        touchcancel: 'onMouseUp'\n      }, evt.data);\n      this.emit('change', {\n        e: evt,\n        handle: this\n      });\n    }\n    onMouseMove(evt) {\n      this.emit('changing', {\n        e: evt,\n        handle: this\n      });\n    }\n    onMouseUp(evt) {\n      this.emit('changed', {\n        e: evt,\n        handle: this\n      });\n      this.undelegateDocumentEvents();\n      this.graph.view.delegateEvents();\n    }\n    onDoubleClick(evt) {\n      this.emit('remove', {\n        e: evt,\n        handle: this\n      });\n    }\n  }\n  Vertices.Handle = Handle;\n})(Vertices || (Vertices = {}));\n(function (Vertices) {\n  const pathClassName = Config.prefix('edge-tool-vertex-path');\n  Vertices.config({\n    name: 'vertices',\n    snapRadius: 20,\n    addable: true,\n    removable: true,\n    removeRedundancies: true,\n    stopPropagation: true,\n    attrs: {\n      r: 6,\n      fill: '#333',\n      stroke: '#fff',\n      cursor: 'move',\n      'stroke-width': 2\n    },\n    createHandle: options => new Vertices.Handle(options),\n    markup: [{\n      tagName: 'path',\n      selector: 'connection',\n      className: pathClassName,\n      attrs: {\n        fill: 'none',\n        stroke: 'transparent',\n        'stroke-width': 10,\n        cursor: 'pointer'\n      }\n    }],\n    events: {\n      [`mousedown .${pathClassName}`]: 'onPathMouseDown',\n      [`touchstart .${pathClassName}`]: 'onPathMouseDown'\n    }\n  });\n})(Vertices || (Vertices = {}));","map":{"version":3,"names":["Point","ModifierKey","Config","View","ToolsView","Vertices","ToolItem","constructor","handles","vertices","cellView","cell","getVertices","onRender","addClass","prefixClassName","options","addable","updatePath","resetHandles","renderHandles","update","length","updateHandles","forEach","handle","stopHandleListening","remove","i","l","vertex","createHandle","processHandle","index","graph","guard","evt","attrs","updatePosition","x","y","stamp","container","appendChild","push","startHandleListening","connection","childNodes","setAttribute","getConnectionPathData","edgeView","can","on","onHandleChange","onHandleChanging","onHandleChanged","onHandleRemove","off","getNeighborPoints","prev","sourceAnchor","next","targetAnchor","create","getMouseEventArgs","e","normalizeEvent","snapToGrid","clientX","clientY","focus","startBatch","ui","toolId","cid","stopPropagation","eventData","start","notifyMouseDown","snapVertex","setVertexAt","notifyMouseMove","stopBatch","vertexAdded","removeRedundancies","verticesRemoved","removeRedundantLinearVertices","render","blur","notifyMouseUp","startX","startY","onClick","checkMouseleave","onChanged","edge","snapRadius","neighbors","Math","abs","removable","removeVertexAt","allowAddVertex","matchModifiers","modifiers","isMatch","onPathMouseDown","preventDefault","toJSON","getVertexIndex","insertVertex","onMouseDown","onRemove","Handle","delegateEvents","mousedown","touchstart","dblclick","createElement","defaults","getDefaults","setAttrs","Object","assign","cx","cy","view","undelegateEvents","delegateDocumentEvents","mousemove","touchmove","mouseup","touchend","touchcancel","data","emit","onMouseMove","onMouseUp","undelegateDocumentEvents","onDoubleClick","pathClassName","prefix","config","name","r","fill","stroke","cursor","markup","tagName","selector","className","events"],"sources":["/home/devbox/project/node_modules/.pnpm/@antv+x6@2.18.1/node_modules/@antv/x6/src/registry/tool/vertices.ts"],"sourcesContent":["import { Point } from '@antv/x6-geometry'\nimport { Dom, ModifierKey } from '@antv/x6-common'\nimport { Config } from '../../config'\nimport { View } from '../../view/view'\nimport { ToolsView } from '../../view/tool'\nimport { EdgeView } from '../../view/edge'\nimport { Edge } from '../../model/edge'\nimport { Attr } from '../attr'\nimport { Graph } from '../../graph'\n\nexport class Vertices extends ToolsView.ToolItem<EdgeView, Vertices.Options> {\n  protected handles: Vertices.Handle[] = []\n\n  protected get vertices() {\n    return this.cellView.cell.getVertices()\n  }\n\n  protected onRender() {\n    this.addClass(this.prefixClassName('edge-tool-vertices'))\n    if (this.options.addable) {\n      this.updatePath()\n    }\n    this.resetHandles()\n    this.renderHandles()\n    return this\n  }\n\n  update() {\n    const vertices = this.vertices\n    if (vertices.length === this.handles.length) {\n      this.updateHandles()\n    } else {\n      this.resetHandles()\n      this.renderHandles()\n    }\n\n    if (this.options.addable) {\n      this.updatePath()\n    }\n\n    return this\n  }\n\n  protected resetHandles() {\n    const handles = this.handles\n    this.handles = []\n    if (handles) {\n      handles.forEach((handle) => {\n        this.stopHandleListening(handle)\n        handle.remove()\n      })\n    }\n  }\n\n  protected renderHandles() {\n    const vertices = this.vertices\n    for (let i = 0, l = vertices.length; i < l; i += 1) {\n      const vertex = vertices[i]\n      const createHandle = this.options.createHandle!\n      const processHandle = this.options.processHandle\n      const handle = createHandle({\n        index: i,\n        graph: this.graph,\n        guard: (evt: Dom.EventObject) => this.guard(evt), // eslint-disable-line no-loop-func\n        attrs: this.options.attrs || {},\n      })\n\n      if (processHandle) {\n        processHandle(handle)\n      }\n\n      handle.updatePosition(vertex.x, vertex.y)\n      this.stamp(handle.container)\n      this.container.appendChild(handle.container)\n      this.handles.push(handle)\n      this.startHandleListening(handle)\n    }\n  }\n\n  protected updateHandles() {\n    const vertices = this.vertices\n    for (let i = 0, l = vertices.length; i < l; i += 1) {\n      const vertex = vertices[i]\n      const handle = this.handles[i]\n      if (handle) {\n        handle.updatePosition(vertex.x, vertex.y)\n      }\n    }\n  }\n\n  protected updatePath() {\n    const connection = this.childNodes.connection\n    if (connection) {\n      connection.setAttribute('d', this.cellView.getConnectionPathData())\n    }\n  }\n\n  protected startHandleListening(handle: Vertices.Handle) {\n    const edgeView = this.cellView\n    if (edgeView.can('vertexMovable')) {\n      handle.on('change', this.onHandleChange, this)\n      handle.on('changing', this.onHandleChanging, this)\n      handle.on('changed', this.onHandleChanged, this)\n    }\n\n    if (edgeView.can('vertexDeletable')) {\n      handle.on('remove', this.onHandleRemove, this)\n    }\n  }\n\n  protected stopHandleListening(handle: Vertices.Handle) {\n    const edgeView = this.cellView\n    if (edgeView.can('vertexMovable')) {\n      handle.off('change', this.onHandleChange, this)\n      handle.off('changing', this.onHandleChanging, this)\n      handle.off('changed', this.onHandleChanged, this)\n    }\n\n    if (edgeView.can('vertexDeletable')) {\n      handle.off('remove', this.onHandleRemove, this)\n    }\n  }\n\n  protected getNeighborPoints(index: number) {\n    const edgeView = this.cellView\n    const vertices = this.vertices\n    const prev = index > 0 ? vertices[index - 1] : edgeView.sourceAnchor\n    const next =\n      index < vertices.length - 1 ? vertices[index + 1] : edgeView.targetAnchor\n    return {\n      prev: Point.create(prev),\n      next: Point.create(next),\n    }\n  }\n\n  protected getMouseEventArgs<T extends Dom.EventObject>(evt: T) {\n    const e = this.normalizeEvent(evt)\n    const { x, y } = this.graph.snapToGrid(e.clientX!, e.clientY!)\n    return { e, x, y }\n  }\n\n  protected onHandleChange({ e }: Vertices.Handle.EventArgs['change']) {\n    this.focus()\n    const edgeView = this.cellView\n    edgeView.cell.startBatch('move-vertex', { ui: true, toolId: this.cid })\n    if (!this.options.stopPropagation) {\n      const { e: evt, x, y } = this.getMouseEventArgs(e)\n      this.eventData(evt, { start: { x, y } })\n      edgeView.notifyMouseDown(evt, x, y)\n    }\n  }\n\n  protected onHandleChanging({\n    handle,\n    e,\n  }: Vertices.Handle.EventArgs['changing']) {\n    const edgeView = this.cellView\n    const index = handle.options.index\n    const { e: evt, x, y } = this.getMouseEventArgs(e)\n    const vertex = { x, y }\n    this.snapVertex(vertex, index)\n    edgeView.cell.setVertexAt(index, vertex, { ui: true, toolId: this.cid })\n    handle.updatePosition(vertex.x, vertex.y)\n    if (!this.options.stopPropagation) {\n      edgeView.notifyMouseMove(evt, x, y)\n    }\n  }\n\n  protected stopBatch(vertexAdded: boolean) {\n    this.cell.stopBatch('move-vertex', { ui: true, toolId: this.cid })\n    if (vertexAdded) {\n      this.cell.stopBatch('add-vertex', { ui: true, toolId: this.cid })\n    }\n  }\n\n  protected onHandleChanged({ e }: Vertices.Handle.EventArgs['changed']) {\n    const options = this.options\n    const edgeView = this.cellView\n\n    if (options.addable) {\n      this.updatePath()\n    }\n\n    if (!options.removeRedundancies) {\n      this.stopBatch(this.eventData(e).vertexAdded)\n      return\n    }\n\n    const verticesRemoved = edgeView.removeRedundantLinearVertices({\n      ui: true,\n      toolId: this.cid,\n    })\n\n    if (verticesRemoved) {\n      this.render()\n    }\n\n    this.blur()\n\n    this.stopBatch(this.eventData(e).vertexAdded)\n\n    const { e: evt, x, y } = this.getMouseEventArgs(e)\n\n    if (!this.options.stopPropagation) {\n      edgeView.notifyMouseUp(evt, x, y)\n      const { start } = this.eventData(evt)\n      if (start) {\n        const { x: startX, y: startY } = start\n        if (startX === x && startY === y) {\n          edgeView.onClick(evt as unknown as Dom.ClickEvent, x, y)\n        }\n      }\n    }\n\n    edgeView.checkMouseleave(evt)\n\n    options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView })\n  }\n\n  protected snapVertex(vertex: Point.PointLike, index: number) {\n    const snapRadius = this.options.snapRadius || 0\n    if (snapRadius > 0) {\n      const neighbors = this.getNeighborPoints(index)\n      const prev = neighbors.prev\n      const next = neighbors.next\n      if (Math.abs(vertex.x - prev.x) < snapRadius) {\n        vertex.x = prev.x\n      } else if (Math.abs(vertex.x - next.x) < snapRadius) {\n        vertex.x = next.x\n      }\n\n      if (Math.abs(vertex.y - prev.y) < snapRadius) {\n        vertex.y = neighbors.prev.y\n      } else if (Math.abs(vertex.y - next.y) < snapRadius) {\n        vertex.y = next.y\n      }\n    }\n  }\n\n  protected onHandleRemove({ handle, e }: Vertices.Handle.EventArgs['remove']) {\n    if (this.options.removable) {\n      const index = handle.options.index\n      const edgeView = this.cellView\n      edgeView.cell.removeVertexAt(index, { ui: true })\n      if (this.options.addable) {\n        this.updatePath()\n      }\n      edgeView.checkMouseleave(this.normalizeEvent(e))\n    }\n  }\n\n  protected allowAddVertex(e: Dom.MouseDownEvent) {\n    const guard = this.guard(e)\n    const addable = this.options.addable && this.cellView.can('vertexAddable')\n    const matchModifiers = this.options.modifiers\n      ? ModifierKey.isMatch(e, this.options.modifiers)\n      : true\n    return !guard && addable && matchModifiers\n  }\n\n  protected onPathMouseDown(evt: Dom.MouseDownEvent) {\n    const edgeView = this.cellView\n\n    if (!this.allowAddVertex(evt)) {\n      return\n    }\n\n    evt.stopPropagation()\n    evt.preventDefault()\n\n    const e = this.normalizeEvent(evt)\n    const vertex = this.graph.snapToGrid(e.clientX, e.clientY).toJSON()\n    edgeView.cell.startBatch('add-vertex', { ui: true, toolId: this.cid })\n    const index = edgeView.getVertexIndex(vertex.x, vertex.y)\n    this.snapVertex(vertex, index)\n    edgeView.cell.insertVertex(vertex, index, {\n      ui: true,\n      toolId: this.cid,\n    })\n    this.render()\n    const handle = this.handles[index]\n    this.eventData(e, { vertexAdded: true })\n    handle.onMouseDown(e)\n  }\n\n  protected onRemove() {\n    this.resetHandles()\n  }\n}\n\nexport namespace Vertices {\n  export interface Options extends ToolsView.ToolItem.Options {\n    snapRadius?: number\n    addable?: boolean\n    removable?: boolean\n    removeRedundancies?: boolean\n    stopPropagation?: boolean\n    modifiers?: string | ModifierKey[]\n    attrs?: Attr.SimpleAttrs | ((handle: Handle) => Attr.SimpleAttrs)\n    createHandle?: (options: Handle.Options) => Handle\n    processHandle?: (handle: Handle) => void\n    onChanged?: (options: { edge: Edge; edgeView: EdgeView }) => void\n  }\n}\n\nexport namespace Vertices {\n  export class Handle extends View<Handle.EventArgs> {\n    protected get graph() {\n      return this.options.graph\n    }\n\n    constructor(public readonly options: Handle.Options) {\n      super()\n      this.render()\n      this.delegateEvents({\n        mousedown: 'onMouseDown',\n        touchstart: 'onMouseDown',\n        dblclick: 'onDoubleClick',\n      })\n    }\n\n    render() {\n      this.container = View.createElement('circle', true)\n      const attrs = this.options.attrs\n      if (typeof attrs === 'function') {\n        const defaults = Vertices.getDefaults<Vertices.Options>()\n        this.setAttrs({\n          ...defaults.attrs,\n          ...attrs(this),\n        })\n      } else {\n        this.setAttrs(attrs)\n      }\n\n      this.addClass(this.prefixClassName('edge-tool-vertex'))\n    }\n\n    updatePosition(x: number, y: number) {\n      this.setAttrs({ cx: x, cy: y })\n    }\n\n    onMouseDown(evt: Dom.MouseDownEvent) {\n      if (this.options.guard(evt)) {\n        return\n      }\n\n      evt.stopPropagation()\n      evt.preventDefault()\n      this.graph.view.undelegateEvents()\n\n      this.delegateDocumentEvents(\n        {\n          mousemove: 'onMouseMove',\n          touchmove: 'onMouseMove',\n          mouseup: 'onMouseUp',\n          touchend: 'onMouseUp',\n          touchcancel: 'onMouseUp',\n        },\n        evt.data,\n      )\n\n      this.emit('change', { e: evt, handle: this })\n    }\n\n    protected onMouseMove(evt: Dom.MouseMoveEvent) {\n      this.emit('changing', { e: evt, handle: this })\n    }\n\n    protected onMouseUp(evt: Dom.MouseUpEvent) {\n      this.emit('changed', { e: evt, handle: this })\n      this.undelegateDocumentEvents()\n      this.graph.view.delegateEvents()\n    }\n\n    protected onDoubleClick(evt: Dom.DoubleClickEvent) {\n      this.emit('remove', { e: evt, handle: this })\n    }\n  }\n\n  export namespace Handle {\n    export interface Options {\n      graph: Graph\n      index: number\n      guard: (evt: Dom.EventObject) => boolean\n      attrs: Attr.SimpleAttrs | ((handle: Handle) => Attr.SimpleAttrs)\n    }\n\n    export interface EventArgs {\n      change: { e: Dom.MouseDownEvent; handle: Handle }\n      changing: { e: Dom.MouseMoveEvent; handle: Handle }\n      changed: { e: Dom.MouseUpEvent; handle: Handle }\n      remove: { e: Dom.DoubleClickEvent; handle: Handle }\n    }\n  }\n}\n\nexport namespace Vertices {\n  const pathClassName = Config.prefix('edge-tool-vertex-path')\n\n  Vertices.config<Vertices.Options>({\n    name: 'vertices',\n    snapRadius: 20,\n    addable: true,\n    removable: true,\n    removeRedundancies: true,\n    stopPropagation: true,\n    attrs: {\n      r: 6,\n      fill: '#333',\n      stroke: '#fff',\n      cursor: 'move',\n      'stroke-width': 2,\n    },\n    createHandle: (options) => new Handle(options),\n    markup: [\n      {\n        tagName: 'path',\n        selector: 'connection',\n        className: pathClassName,\n        attrs: {\n          fill: 'none',\n          stroke: 'transparent',\n          'stroke-width': 10,\n          cursor: 'pointer',\n        },\n      },\n    ],\n    events: {\n      [`mousedown .${pathClassName}`]: 'onPathMouseDown',\n      [`touchstart .${pathClassName}`]: 'onPathMouseDown',\n    },\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}