{"ast":null,"code":"import { Platform } from '../platform';\nexport class MouseWheelHandle {\n  constructor(target, onWheelCallback, onWheelGuard) {\n    this.animationFrameId = 0;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.eventName = Platform.isEventSupported('wheel') ? 'wheel' : 'mousewheel';\n    this.target = target;\n    this.onWheelCallback = onWheelCallback;\n    this.onWheelGuard = onWheelGuard;\n    this.onWheel = this.onWheel.bind(this);\n    this.didWheel = this.didWheel.bind(this);\n  }\n  enable() {\n    this.target.addEventListener(this.eventName, this.onWheel, {\n      passive: false\n    });\n  }\n  disable() {\n    this.target.removeEventListener(this.eventName, this.onWheel);\n  }\n  onWheel(e) {\n    if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n      return;\n    }\n    this.deltaX += e.deltaX;\n    this.deltaY += e.deltaY;\n    e.preventDefault();\n    let changed;\n    if (this.deltaX !== 0 || this.deltaY !== 0) {\n      e.stopPropagation();\n      changed = true;\n    }\n    if (changed === true && this.animationFrameId === 0) {\n      this.animationFrameId = requestAnimationFrame(() => {\n        this.didWheel(e);\n      });\n    }\n  }\n  didWheel(e) {\n    this.animationFrameId = 0;\n    this.onWheelCallback(e, this.deltaX, this.deltaY);\n    this.deltaX = 0;\n    this.deltaY = 0;\n  }\n}","map":{"version":3,"names":["Platform","MouseWheelHandle","constructor","target","onWheelCallback","onWheelGuard","animationFrameId","deltaX","deltaY","eventName","isEventSupported","onWheel","bind","didWheel","enable","addEventListener","passive","disable","removeEventListener","e","preventDefault","changed","stopPropagation","requestAnimationFrame"],"sources":["/home/devbox/project/node_modules/.pnpm/@antv+x6-common@2.0.17/node_modules/@antv/x6-common/src/dom/mousewheel.ts"],"sourcesContent":["import { Platform } from '../platform'\n\nexport class MouseWheelHandle {\n  private target: HTMLElement | Document\n  private onWheelCallback: MouseWheelHandle.OnWheelCallback\n  private onWheelGuard?: MouseWheelHandle.OnWheelGuard\n  private animationFrameId = 0\n  private deltaX = 0\n  private deltaY = 0\n  private eventName = Platform.isEventSupported('wheel')\n    ? 'wheel'\n    : 'mousewheel'\n\n  constructor(\n    target: HTMLElement | Document,\n    onWheelCallback: MouseWheelHandle.OnWheelCallback,\n    onWheelGuard?: MouseWheelHandle.OnWheelGuard,\n  ) {\n    this.target = target\n    this.onWheelCallback = onWheelCallback\n    this.onWheelGuard = onWheelGuard\n    this.onWheel = this.onWheel.bind(this)\n    this.didWheel = this.didWheel.bind(this)\n  }\n\n  public enable() {\n    this.target.addEventListener(this.eventName, this.onWheel, {\n      passive: false,\n    })\n  }\n\n  public disable() {\n    this.target.removeEventListener(this.eventName, this.onWheel)\n  }\n\n  private onWheel(e: WheelEvent) {\n    if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n      return\n    }\n\n    this.deltaX += e.deltaX\n    this.deltaY += e.deltaY\n    e.preventDefault()\n\n    let changed\n    if (this.deltaX !== 0 || this.deltaY !== 0) {\n      e.stopPropagation()\n      changed = true\n    }\n\n    if (changed === true && this.animationFrameId === 0) {\n      this.animationFrameId = requestAnimationFrame(() => {\n        this.didWheel(e)\n      })\n    }\n  }\n\n  private didWheel(e: WheelEvent) {\n    this.animationFrameId = 0\n    this.onWheelCallback(e, this.deltaX, this.deltaY)\n    this.deltaX = 0\n    this.deltaY = 0\n  }\n}\n\nexport namespace MouseWheelHandle {\n  export type OnWheelGuard = (e: WheelEvent) => boolean\n  export type OnWheelCallback = (\n    e: WheelEvent,\n    deltaX?: number,\n    deltaY?: number,\n  ) => void\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,aAAa;AAEtC,OAAM,MAAOC,gBAAgB;EAW3BC,YACEC,MAA8B,EAC9BC,eAAiD,EACjDC,YAA4C;IAVtC,KAAAC,gBAAgB,GAAG,CAAC;IACpB,KAAAC,MAAM,GAAG,CAAC;IACV,KAAAC,MAAM,GAAG,CAAC;IACV,KAAAC,SAAS,GAAGT,QAAQ,CAACU,gBAAgB,CAAC,OAAO,CAAC,GAClD,OAAO,GACP,YAAY;IAOd,IAAI,CAACP,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACC,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACM,OAAO,GAAG,IAAI,CAACA,OAAO,CAACC,IAAI,CAAC,IAAI,CAAC;IACtC,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACD,IAAI,CAAC,IAAI,CAAC;EAC1C;EAEOE,MAAMA,CAAA;IACX,IAAI,CAACX,MAAM,CAACY,gBAAgB,CAAC,IAAI,CAACN,SAAS,EAAE,IAAI,CAACE,OAAO,EAAE;MACzDK,OAAO,EAAE;KACV,CAAC;EACJ;EAEOC,OAAOA,CAAA;IACZ,IAAI,CAACd,MAAM,CAACe,mBAAmB,CAAC,IAAI,CAACT,SAAS,EAAE,IAAI,CAACE,OAAO,CAAC;EAC/D;EAEQA,OAAOA,CAACQ,CAAa;IAC3B,IAAI,IAAI,CAACd,YAAY,IAAI,IAAI,IAAI,CAAC,IAAI,CAACA,YAAY,CAACc,CAAC,CAAC,EAAE;MACtD;;IAGF,IAAI,CAACZ,MAAM,IAAIY,CAAC,CAACZ,MAAM;IACvB,IAAI,CAACC,MAAM,IAAIW,CAAC,CAACX,MAAM;IACvBW,CAAC,CAACC,cAAc,EAAE;IAElB,IAAIC,OAAO;IACX,IAAI,IAAI,CAACd,MAAM,KAAK,CAAC,IAAI,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MAC1CW,CAAC,CAACG,eAAe,EAAE;MACnBD,OAAO,GAAG,IAAI;;IAGhB,IAAIA,OAAO,KAAK,IAAI,IAAI,IAAI,CAACf,gBAAgB,KAAK,CAAC,EAAE;MACnD,IAAI,CAACA,gBAAgB,GAAGiB,qBAAqB,CAAC,MAAK;QACjD,IAAI,CAACV,QAAQ,CAACM,CAAC,CAAC;MAClB,CAAC,CAAC;;EAEN;EAEQN,QAAQA,CAACM,CAAa;IAC5B,IAAI,CAACb,gBAAgB,GAAG,CAAC;IACzB,IAAI,CAACF,eAAe,CAACe,CAAC,EAAE,IAAI,CAACZ,MAAM,EAAE,IAAI,CAACC,MAAM,CAAC;IACjD,IAAI,CAACD,MAAM,GAAG,CAAC;IACf,IAAI,CAACC,MAAM,GAAG,CAAC;EACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}