{"ast":null,"code":"import { computeStyle, computeStyleInt } from './css';\nimport { isElement } from './elem';\nexport function offset(elem) {\n  const rect = elem.getBoundingClientRect();\n  const win = elem.ownerDocument.defaultView;\n  return {\n    top: rect.top + win.pageYOffset,\n    left: rect.left + win.pageXOffset\n  };\n}\nexport function width(elem) {\n  const rect = elem.getBoundingClientRect();\n  return rect.width;\n}\nexport function height(elem) {\n  const rect = elem.getBoundingClientRect();\n  return rect.height;\n}\nexport function position(elem) {\n  const isFixed = computeStyle(elem, 'position') === 'fixed';\n  let offsetValue;\n  if (isFixed) {\n    const rect = elem.getBoundingClientRect();\n    offsetValue = {\n      left: rect.left,\n      top: rect.top\n    };\n  } else {\n    offsetValue = offset(elem);\n  }\n  if (!isFixed) {\n    const doc = elem.ownerDocument;\n    let offsetParent = elem.offsetParent || doc.documentElement;\n    while ((offsetParent === doc.body || offsetParent === doc.documentElement) && computeStyle(offsetParent, 'position') === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n    if (offsetParent !== elem && isElement(offsetParent)) {\n      const parentOffset = offset(offsetParent);\n      offsetValue.top -= parentOffset.top + computeStyleInt(offsetParent, 'borderTopWidth');\n      offsetValue.left -= parentOffset.left + computeStyleInt(offsetParent, 'borderLeftWidth');\n    }\n  }\n  return {\n    top: offsetValue.top - computeStyleInt(elem, 'marginTop'),\n    left: offsetValue.left - computeStyleInt(elem, 'marginLeft')\n  };\n}","map":{"version":3,"names":["computeStyle","computeStyleInt","isElement","offset","elem","rect","getBoundingClientRect","win","ownerDocument","defaultView","top","pageYOffset","left","pageXOffset","width","height","position","isFixed","offsetValue","doc","offsetParent","documentElement","body","parentNode","parentOffset"],"sources":["/home/devbox/project/node_modules/.pnpm/@antv+x6-common@2.0.17/node_modules/@antv/x6-common/src/dom/position.ts"],"sourcesContent":["import { computeStyle, computeStyleInt } from './css'\nimport { isElement } from './elem'\n\nexport function offset(elem: Element) {\n  const rect = elem.getBoundingClientRect()\n  const win = elem.ownerDocument.defaultView!\n\n  return {\n    top: rect.top + win.pageYOffset,\n    left: rect.left + win.pageXOffset,\n  }\n}\n\nexport function width(elem: Element) {\n  const rect = elem.getBoundingClientRect()\n  return rect.width\n}\n\nexport function height(elem: Element) {\n  const rect = elem.getBoundingClientRect()\n  return rect.height\n}\n\nexport function position(elem: Element) {\n  const isFixed = computeStyle(elem, 'position') === 'fixed'\n  let offsetValue: ReturnType<typeof offset>\n  if (isFixed) {\n    const rect = elem.getBoundingClientRect()\n    offsetValue = { left: rect.left, top: rect.top }\n  } else {\n    offsetValue = offset(elem)\n  }\n\n  if (!isFixed) {\n    const doc = elem.ownerDocument\n    let offsetParent = (elem as any).offsetParent || doc.documentElement\n    while (\n      (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n      computeStyle(offsetParent, 'position') === 'static'\n    ) {\n      offsetParent = offsetParent.parentNode\n    }\n    if (offsetParent !== elem && isElement(offsetParent)) {\n      const parentOffset = offset(offsetParent)\n      offsetValue.top -=\n        parentOffset.top + computeStyleInt(offsetParent, 'borderTopWidth')\n      offsetValue.left -=\n        parentOffset.left + computeStyleInt(offsetParent, 'borderLeftWidth')\n    }\n  }\n\n  return {\n    top: offsetValue.top - computeStyleInt(elem, 'marginTop'),\n    left: offsetValue.left - computeStyleInt(elem, 'marginLeft'),\n  }\n}\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,eAAe,QAAQ,OAAO;AACrD,SAASC,SAAS,QAAQ,QAAQ;AAElC,OAAM,SAAUC,MAAMA,CAACC,IAAa;EAClC,MAAMC,IAAI,GAAGD,IAAI,CAACE,qBAAqB,EAAE;EACzC,MAAMC,GAAG,GAAGH,IAAI,CAACI,aAAa,CAACC,WAAY;EAE3C,OAAO;IACLC,GAAG,EAAEL,IAAI,CAACK,GAAG,GAAGH,GAAG,CAACI,WAAW;IAC/BC,IAAI,EAAEP,IAAI,CAACO,IAAI,GAAGL,GAAG,CAACM;GACvB;AACH;AAEA,OAAM,SAAUC,KAAKA,CAACV,IAAa;EACjC,MAAMC,IAAI,GAAGD,IAAI,CAACE,qBAAqB,EAAE;EACzC,OAAOD,IAAI,CAACS,KAAK;AACnB;AAEA,OAAM,SAAUC,MAAMA,CAACX,IAAa;EAClC,MAAMC,IAAI,GAAGD,IAAI,CAACE,qBAAqB,EAAE;EACzC,OAAOD,IAAI,CAACU,MAAM;AACpB;AAEA,OAAM,SAAUC,QAAQA,CAACZ,IAAa;EACpC,MAAMa,OAAO,GAAGjB,YAAY,CAACI,IAAI,EAAE,UAAU,CAAC,KAAK,OAAO;EAC1D,IAAIc,WAAsC;EAC1C,IAAID,OAAO,EAAE;IACX,MAAMZ,IAAI,GAAGD,IAAI,CAACE,qBAAqB,EAAE;IACzCY,WAAW,GAAG;MAAEN,IAAI,EAAEP,IAAI,CAACO,IAAI;MAAEF,GAAG,EAAEL,IAAI,CAACK;IAAG,CAAE;GACjD,MAAM;IACLQ,WAAW,GAAGf,MAAM,CAACC,IAAI,CAAC;;EAG5B,IAAI,CAACa,OAAO,EAAE;IACZ,MAAME,GAAG,GAAGf,IAAI,CAACI,aAAa;IAC9B,IAAIY,YAAY,GAAIhB,IAAY,CAACgB,YAAY,IAAID,GAAG,CAACE,eAAe;IACpE,OACE,CAACD,YAAY,KAAKD,GAAG,CAACG,IAAI,IAAIF,YAAY,KAAKD,GAAG,CAACE,eAAe,KAClErB,YAAY,CAACoB,YAAY,EAAE,UAAU,CAAC,KAAK,QAAQ,EACnD;MACAA,YAAY,GAAGA,YAAY,CAACG,UAAU;;IAExC,IAAIH,YAAY,KAAKhB,IAAI,IAAIF,SAAS,CAACkB,YAAY,CAAC,EAAE;MACpD,MAAMI,YAAY,GAAGrB,MAAM,CAACiB,YAAY,CAAC;MACzCF,WAAW,CAACR,GAAG,IACbc,YAAY,CAACd,GAAG,GAAGT,eAAe,CAACmB,YAAY,EAAE,gBAAgB,CAAC;MACpEF,WAAW,CAACN,IAAI,IACdY,YAAY,CAACZ,IAAI,GAAGX,eAAe,CAACmB,YAAY,EAAE,iBAAiB,CAAC;;;EAI1E,OAAO;IACLV,GAAG,EAAEQ,WAAW,CAACR,GAAG,GAAGT,eAAe,CAACG,IAAI,EAAE,WAAW,CAAC;IACzDQ,IAAI,EAAEM,WAAW,CAACN,IAAI,GAAGX,eAAe,CAACG,IAAI,EAAE,YAAY;GAC5D;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}