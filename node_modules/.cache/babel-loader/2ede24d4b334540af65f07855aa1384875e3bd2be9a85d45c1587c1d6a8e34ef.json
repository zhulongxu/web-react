{"ast":null,"code":"import { Store } from './store';\nexport var Util;\n(function (Util) {\n  Util.returnTrue = () => true;\n  Util.returnFalse = () => false;\n  function stopPropagationCallback(e) {\n    e.stopPropagation();\n  }\n  Util.stopPropagationCallback = stopPropagationCallback;\n  function addEventListener(elem, type, handler) {\n    if (elem.addEventListener != null) {\n      elem.addEventListener(type, handler);\n    }\n  }\n  Util.addEventListener = addEventListener;\n  function removeEventListener(elem, type, handler) {\n    if (elem.removeEventListener != null) {\n      elem.removeEventListener(type, handler);\n    }\n  }\n  Util.removeEventListener = removeEventListener;\n})(Util || (Util = {}));\n(function (Util) {\n  const rNotHTMLWhite = /[^\\x20\\t\\r\\n\\f]+/g;\n  const rNamespace = /^([^.]*)(?:\\.(.+)|)/;\n  function splitType(types) {\n    return (types || '').match(rNotHTMLWhite) || [''];\n  }\n  Util.splitType = splitType;\n  function normalizeType(type) {\n    const parts = rNamespace.exec(type) || [];\n    return {\n      originType: parts[1] ? parts[1].trim() : parts[1],\n      namespaces: parts[2] ? parts[2].split('.').map(ns => ns.trim()).sort() : []\n    };\n  }\n  Util.normalizeType = normalizeType;\n  function isValidTarget(target) {\n    // Accepts only:\n    //  - Node\n    //    - Node.ELEMENT_NODE\n    //    - Node.DOCUMENT_NODE\n    //  - Object\n    //    - Any\n    return target.nodeType === 1 || target.nodeType === 9 || !+target.nodeType;\n  }\n  Util.isValidTarget = isValidTarget;\n  function isValidSelector(elem, selector) {\n    if (selector) {\n      const node = elem;\n      return node.querySelector != null && node.querySelector(selector) != null;\n    }\n    return true;\n  }\n  Util.isValidSelector = isValidSelector;\n})(Util || (Util = {}));\n(function (Util) {\n  let seed = 0;\n  const cache = new WeakMap();\n  function ensureHandlerId(handler) {\n    if (!cache.has(handler)) {\n      cache.set(handler, seed);\n      seed += 1;\n    }\n    return cache.get(handler);\n  }\n  Util.ensureHandlerId = ensureHandlerId;\n  function getHandlerId(handler) {\n    return cache.get(handler);\n  }\n  Util.getHandlerId = getHandlerId;\n  function removeHandlerId(handler) {\n    return cache.delete(handler);\n  }\n  Util.removeHandlerId = removeHandlerId;\n  function setHandlerId(handler, id) {\n    return cache.set(handler, id);\n  }\n  Util.setHandlerId = setHandlerId;\n})(Util || (Util = {}));\n(function (Util) {\n  function getHandlerQueue(elem, event) {\n    const queue = [];\n    const store = Store.get(elem);\n    const bag = store && store.events && store.events[event.type];\n    const handlers = bag && bag.handlers || [];\n    const delegateCount = bag ? bag.delegateCount : 0;\n    if (delegateCount > 0 &&\n    // Support: Firefox <=42 - 66+\n    // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n    // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n    // Support: IE 11+\n    // ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n    !(event.type === 'click' && typeof event.button === 'number' && event.button >= 1)) {\n      for (let curr = event.target; curr !== elem; curr = curr.parentNode || elem) {\n        // Don't check non-elements\n        // Don't process clicks on disabled elements\n        if (curr.nodeType === 1 && !(event.type === 'click' && curr.disabled === true)) {\n          const matchedHandlers = [];\n          const matchedSelectors = {};\n          for (let i = 0; i < delegateCount; i += 1) {\n            const handleObj = handlers[i];\n            const selector = handleObj.selector;\n            if (selector != null && matchedSelectors[selector] == null) {\n              const node = elem;\n              const nodes = [];\n              node.querySelectorAll(selector).forEach(child => {\n                nodes.push(child);\n              });\n              matchedSelectors[selector] = nodes.includes(curr);\n            }\n            if (matchedSelectors[selector]) {\n              matchedHandlers.push(handleObj);\n            }\n          }\n          if (matchedHandlers.length) {\n            queue.push({\n              elem: curr,\n              handlers: matchedHandlers\n            });\n          }\n        }\n      }\n    }\n    // Add the remaining (directly-bound) handlers\n    if (delegateCount < handlers.length) {\n      queue.push({\n        elem,\n        handlers: handlers.slice(delegateCount)\n      });\n    }\n    return queue;\n  }\n  Util.getHandlerQueue = getHandlerQueue;\n})(Util || (Util = {}));\n(function (Util) {\n  function isWindow(obj) {\n    return obj != null && obj === obj.window;\n  }\n  Util.isWindow = isWindow;\n})(Util || (Util = {}));\n(function (Util) {\n  function contains(a, b) {\n    const adown = a.nodeType === 9 ? a.documentElement : a;\n    const bup = b && b.parentNode;\n    return a === bup || !!(bup && bup.nodeType === 1 && (\n    // Support: IE 9 - 11+\n    // IE doesn't have `contains` on SVG.\n    adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n  }\n  Util.contains = contains;\n})(Util || (Util = {}));","map":{"version":3,"names":["Store","Util","returnTrue","returnFalse","stopPropagationCallback","e","stopPropagation","addEventListener","elem","type","handler","removeEventListener","rNotHTMLWhite","rNamespace","splitType","types","match","normalizeType","parts","exec","originType","trim","namespaces","split","map","ns","sort","isValidTarget","target","nodeType","isValidSelector","selector","node","querySelector","seed","cache","WeakMap","ensureHandlerId","has","set","get","getHandlerId","removeHandlerId","delete","setHandlerId","id","getHandlerQueue","event","queue","store","bag","events","handlers","delegateCount","button","curr","parentNode","disabled","matchedHandlers","matchedSelectors","i","handleObj","nodes","querySelectorAll","forEach","child","push","includes","length","slice","isWindow","obj","window","contains","a","b","adown","documentElement","bup","compareDocumentPosition"],"sources":["/home/devbox/project/node_modules/.pnpm/@antv+x6-common@2.0.17/node_modules/@antv/x6-common/src/dom/event/util.ts"],"sourcesContent":["import { Store } from './store'\nimport { EventObject } from './object'\n\nexport namespace Util {\n  export const returnTrue = () => true\n  export const returnFalse = () => false\n  export function stopPropagationCallback(e: Event) {\n    e.stopPropagation()\n  }\n\n  export function addEventListener<TElement extends Element>(\n    elem: TElement,\n    type: string,\n    handler: EventListener,\n  ) {\n    if (elem.addEventListener != null) {\n      elem.addEventListener(type, handler as any)\n    }\n  }\n\n  export function removeEventListener<TElement extends Element>(\n    elem: TElement,\n    type: string,\n    handler: EventListener,\n  ) {\n    if (elem.removeEventListener != null) {\n      elem.removeEventListener(type, handler as any)\n    }\n  }\n}\n\nexport namespace Util {\n  const rNotHTMLWhite = /[^\\x20\\t\\r\\n\\f]+/g\n  const rNamespace = /^([^.]*)(?:\\.(.+)|)/\n\n  export function splitType(types: string) {\n    return (types || '').match(rNotHTMLWhite) || ['']\n  }\n\n  export function normalizeType(type: string) {\n    const parts = rNamespace.exec(type) || []\n    return {\n      originType: parts[1] ? parts[1].trim() : parts[1],\n      namespaces: parts[2]\n        ? parts[2]\n            .split('.')\n            .map((ns) => ns.trim())\n            .sort()\n        : [],\n    }\n  }\n\n  export function isValidTarget(target: Element | Record<string, any>) {\n    // Accepts only:\n    //  - Node\n    //    - Node.ELEMENT_NODE\n    //    - Node.DOCUMENT_NODE\n    //  - Object\n    //    - Any\n    return target.nodeType === 1 || target.nodeType === 9 || !+target.nodeType\n  }\n\n  export function isValidSelector(elem: Store.EventTarget, selector?: string) {\n    if (selector) {\n      const node = elem as Element\n      return node.querySelector != null && node.querySelector(selector) != null\n    }\n    return true\n  }\n}\n\nexport namespace Util {\n  type Handler = (...args: any[]) => void\n\n  let seed = 0\n  const cache: WeakMap<Handler, number> = new WeakMap()\n\n  export function ensureHandlerId(handler: Handler) {\n    if (!cache.has(handler)) {\n      cache.set(handler, seed)\n      seed += 1\n    }\n\n    return cache.get(handler)!\n  }\n\n  export function getHandlerId(handler: Handler) {\n    return cache.get(handler)\n  }\n\n  export function removeHandlerId(handler: Handler) {\n    return cache.delete(handler)\n  }\n\n  export function setHandlerId(handler: Handler, id: number) {\n    return cache.set(handler, id)\n  }\n}\n\nexport namespace Util {\n  export function getHandlerQueue(elem: Store.EventTarget, event: EventObject) {\n    const queue = []\n    const store = Store.get(elem)\n    const bag = store && store.events && store.events[event.type]\n    const handlers = (bag && bag.handlers) || []\n    const delegateCount = bag ? bag.delegateCount : 0\n\n    if (\n      delegateCount > 0 &&\n      // Support: Firefox <=42 - 66+\n      // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n      // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n      // Support: IE 11+\n      // ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n      !(\n        event.type === 'click' &&\n        typeof event.button === 'number' &&\n        event.button >= 1\n      )\n    ) {\n      for (\n        let curr = event.target as Node;\n        curr !== elem;\n        curr = curr.parentNode || (elem as Node)\n      ) {\n        // Don't check non-elements\n        // Don't process clicks on disabled elements\n        if (\n          curr.nodeType === 1 &&\n          !(event.type === 'click' && (curr as any).disabled === true)\n        ) {\n          const matchedHandlers: Store.HandlerObject[] = []\n          const matchedSelectors: { [selector: string]: boolean } = {}\n\n          for (let i = 0; i < delegateCount; i += 1) {\n            const handleObj = handlers[i]\n            const selector = handleObj.selector!\n\n            if (selector != null && matchedSelectors[selector] == null) {\n              const node = elem as Element\n              const nodes: Element[] = []\n\n              node.querySelectorAll(selector).forEach((child) => {\n                nodes.push(child)\n              })\n\n              matchedSelectors[selector] = nodes.includes(curr as Element)\n            }\n\n            if (matchedSelectors[selector]) {\n              matchedHandlers.push(handleObj)\n            }\n          }\n\n          if (matchedHandlers.length) {\n            queue.push({ elem: curr, handlers: matchedHandlers })\n          }\n        }\n      }\n    }\n\n    // Add the remaining (directly-bound) handlers\n    if (delegateCount < handlers.length) {\n      queue.push({ elem, handlers: handlers.slice(delegateCount) })\n    }\n\n    return queue\n  }\n}\n\nexport namespace Util {\n  export function isWindow(obj: any): obj is Window {\n    return obj != null && obj === obj.window\n  }\n}\n\nexport namespace Util {\n  export function contains(a: any, b: any) {\n    const adown = a.nodeType === 9 ? a.documentElement : a\n    const bup = b && b.parentNode\n\n    return (\n      a === bup ||\n      !!(\n        bup &&\n        bup.nodeType === 1 &&\n        // Support: IE 9 - 11+\n        // IE doesn't have `contains` on SVG.\n        (adown.contains\n          ? adown.contains(bup)\n          : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16)\n      )\n    )\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}