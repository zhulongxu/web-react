{"ast":null,"code":"import { Point } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const radial = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args);\nexport const radialOriented = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args);\nfunction radialLayout(portCenterOffset, autoOrient, args) {\n  const offset = args.offset != null ? args.offset : 20;\n  const origin = new Point(0, 0);\n  const angle = -portCenterOffset.theta(origin);\n  const pos = portCenterOffset.clone().move(origin, offset).diff(portCenterOffset).round();\n  let y = '.3em';\n  let textAnchor;\n  let orientAngle = angle;\n  if ((angle + 90) % 180 === 0) {\n    textAnchor = autoOrient ? 'end' : 'middle';\n    if (!autoOrient && angle === -270) {\n      y = '0em';\n    }\n  } else if (angle > -270 && angle < -90) {\n    textAnchor = 'start';\n    orientAngle = angle - 180;\n  } else {\n    textAnchor = 'end';\n  }\n  return toResult({\n    position: pos.round().toJSON(),\n    angle: autoOrient ? orientAngle : 0,\n    attrs: {\n      '.': {\n        y,\n        'text-anchor': textAnchor\n      }\n    }\n  }, args);\n}","map":{"version":3,"names":["Point","toResult","radial","portPosition","elemBBox","args","radialLayout","diff","getCenter","radialOriented","portCenterOffset","autoOrient","offset","origin","angle","theta","pos","clone","move","round","y","textAnchor","orientAngle","position","toJSON","attrs"],"sources":["/home/devbox/project/node_modules/.pnpm/@antv+x6@2.18.1/node_modules/@antv/x6/src/registry/port-label-layout/radial.ts"],"sourcesContent":["import { Point } from '@antv/x6-geometry'\nimport { PortLabelLayout } from './index'\nimport { toResult } from './util'\n\nexport interface RadialArgs extends PortLabelLayout.CommonOptions {\n  offset?: number\n}\n\nexport const radial: PortLabelLayout.Definition<RadialArgs> = (\n  portPosition,\n  elemBBox,\n  args,\n) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args)\n\nexport const radialOriented: PortLabelLayout.Definition<RadialArgs> = (\n  portPosition,\n  elemBBox,\n  args,\n) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args)\n\nfunction radialLayout(\n  portCenterOffset: Point,\n  autoOrient: boolean,\n  args: RadialArgs,\n) {\n  const offset = args.offset != null ? args.offset : 20\n  const origin = new Point(0, 0)\n  const angle = -portCenterOffset.theta(origin)\n  const pos = portCenterOffset\n    .clone()\n    .move(origin, offset)\n    .diff(portCenterOffset)\n    .round()\n\n  let y = '.3em'\n  let textAnchor\n  let orientAngle = angle\n\n  if ((angle + 90) % 180 === 0) {\n    textAnchor = autoOrient ? 'end' : 'middle'\n    if (!autoOrient && angle === -270) {\n      y = '0em'\n    }\n  } else if (angle > -270 && angle < -90) {\n    textAnchor = 'start'\n    orientAngle = angle - 180\n  } else {\n    textAnchor = 'end'\n  }\n\n  return toResult(\n    {\n      position: pos.round().toJSON(),\n      angle: autoOrient ? orientAngle : 0,\n      attrs: {\n        '.': {\n          y,\n          'text-anchor': textAnchor,\n        },\n      },\n    },\n    args,\n  )\n}\n"],"mappings":"AAAA,SAASA,KAAK,QAAQ,mBAAmB;AAEzC,SAASC,QAAQ,QAAQ,QAAQ;AAMjC,OAAO,MAAMC,MAAM,GAA2CA,CAC5DC,YAAY,EACZC,QAAQ,EACRC,IAAI,KACDC,YAAY,CAACH,YAAY,CAACI,IAAI,CAACH,QAAQ,CAACI,SAAS,EAAE,CAAC,EAAE,KAAK,EAAEH,IAAI,CAAC;AAEvE,OAAO,MAAMI,cAAc,GAA2CA,CACpEN,YAAY,EACZC,QAAQ,EACRC,IAAI,KACDC,YAAY,CAACH,YAAY,CAACI,IAAI,CAACH,QAAQ,CAACI,SAAS,EAAE,CAAC,EAAE,IAAI,EAAEH,IAAI,CAAC;AAEtE,SAASC,YAAYA,CACnBI,gBAAuB,EACvBC,UAAmB,EACnBN,IAAgB;EAEhB,MAAMO,MAAM,GAAGP,IAAI,CAACO,MAAM,IAAI,IAAI,GAAGP,IAAI,CAACO,MAAM,GAAG,EAAE;EACrD,MAAMC,MAAM,GAAG,IAAIb,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC9B,MAAMc,KAAK,GAAG,CAACJ,gBAAgB,CAACK,KAAK,CAACF,MAAM,CAAC;EAC7C,MAAMG,GAAG,GAAGN,gBAAgB,CACzBO,KAAK,EAAE,CACPC,IAAI,CAACL,MAAM,EAAED,MAAM,CAAC,CACpBL,IAAI,CAACG,gBAAgB,CAAC,CACtBS,KAAK,EAAE;EAEV,IAAIC,CAAC,GAAG,MAAM;EACd,IAAIC,UAAU;EACd,IAAIC,WAAW,GAAGR,KAAK;EAEvB,IAAI,CAACA,KAAK,GAAG,EAAE,IAAI,GAAG,KAAK,CAAC,EAAE;IAC5BO,UAAU,GAAGV,UAAU,GAAG,KAAK,GAAG,QAAQ;IAC1C,IAAI,CAACA,UAAU,IAAIG,KAAK,KAAK,CAAC,GAAG,EAAE;MACjCM,CAAC,GAAG,KAAK;;GAEZ,MAAM,IAAIN,KAAK,GAAG,CAAC,GAAG,IAAIA,KAAK,GAAG,CAAC,EAAE,EAAE;IACtCO,UAAU,GAAG,OAAO;IACpBC,WAAW,GAAGR,KAAK,GAAG,GAAG;GAC1B,MAAM;IACLO,UAAU,GAAG,KAAK;;EAGpB,OAAOpB,QAAQ,CACb;IACEsB,QAAQ,EAAEP,GAAG,CAACG,KAAK,EAAE,CAACK,MAAM,EAAE;IAC9BV,KAAK,EAAEH,UAAU,GAAGW,WAAW,GAAG,CAAC;IACnCG,KAAK,EAAE;MACL,GAAG,EAAE;QACHL,CAAC;QACD,aAAa,EAAEC;;;GAGpB,EACDhB,IAAI,CACL;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}