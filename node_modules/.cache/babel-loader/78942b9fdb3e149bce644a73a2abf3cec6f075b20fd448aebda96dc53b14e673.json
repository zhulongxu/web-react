{"ast":null,"code":"import { Platform } from '../platform';\nconst cssModules = [];\nexport function ensure(name, content) {\n  const cssModule = cssModules.find(m => m.name === name);\n  if (cssModule) {\n    cssModule.loadTimes += 1;\n    if (cssModule.loadTimes > 1) {\n      return;\n    }\n  }\n  if (!Platform.isApplyingHMR()) {\n    const styleElement = document.createElement('style');\n    styleElement.setAttribute('type', 'text/css');\n    styleElement.textContent = content;\n    const head = document.querySelector('head');\n    if (head) {\n      head.insertBefore(styleElement, head.firstChild);\n    }\n    cssModules.push({\n      name,\n      loadTimes: 1,\n      styleElement\n    });\n  }\n}\nexport function clean(name) {\n  const index = cssModules.findIndex(m => m.name === name);\n  if (index > -1) {\n    const cssModule = cssModules[index];\n    cssModule.loadTimes -= 1;\n    if (cssModule.loadTimes > 0) {\n      return;\n    }\n    let styleElement = cssModule.styleElement;\n    if (styleElement && styleElement.parentNode) {\n      styleElement.parentNode.removeChild(styleElement);\n    }\n    styleElement = null;\n    cssModules.splice(index, 1);\n  }\n}","map":{"version":3,"names":["Platform","cssModules","ensure","name","content","cssModule","find","m","loadTimes","isApplyingHMR","styleElement","document","createElement","setAttribute","textContent","head","querySelector","insertBefore","firstChild","push","clean","index","findIndex","parentNode","removeChild","splice"],"sources":["/home/devbox/project/node_modules/.pnpm/@antv+x6-common@2.0.17/node_modules/@antv/x6-common/src/css-loader/loader.ts"],"sourcesContent":["import { Platform } from '../platform'\n\ninterface CssModule {\n  name: string\n  loadTimes: number\n  styleElement: HTMLStyleElement | null\n}\n\nconst cssModules: CssModule[] = []\n\nexport function ensure(name: string, content: string) {\n  const cssModule = cssModules.find((m) => m.name === name)\n  if (cssModule) {\n    cssModule.loadTimes += 1\n    if (cssModule.loadTimes > 1) {\n      return\n    }\n  }\n\n  if (!Platform.isApplyingHMR()) {\n    const styleElement = document.createElement('style')\n    styleElement.setAttribute('type', 'text/css')\n    styleElement.textContent = content\n\n    const head = document.querySelector('head') as HTMLHeadElement\n    if (head) {\n      head.insertBefore(styleElement, head.firstChild)\n    }\n\n    cssModules.push({\n      name,\n      loadTimes: 1,\n      styleElement,\n    })\n  }\n}\n\nexport function clean(name: string) {\n  const index = cssModules.findIndex((m) => m.name === name)\n\n  if (index > -1) {\n    const cssModule = cssModules[index]\n    cssModule.loadTimes -= 1\n    if (cssModule.loadTimes > 0) {\n      return\n    }\n\n    let styleElement = cssModule.styleElement\n    if (styleElement && styleElement.parentNode) {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n    styleElement = null\n    cssModules.splice(index, 1)\n  }\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,aAAa;AAQtC,MAAMC,UAAU,GAAgB,EAAE;AAElC,OAAM,SAAUC,MAAMA,CAACC,IAAY,EAAEC,OAAe;EAClD,MAAMC,SAAS,GAAGJ,UAAU,CAACK,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACJ,IAAI,KAAKA,IAAI,CAAC;EACzD,IAAIE,SAAS,EAAE;IACbA,SAAS,CAACG,SAAS,IAAI,CAAC;IACxB,IAAIH,SAAS,CAACG,SAAS,GAAG,CAAC,EAAE;MAC3B;;;EAIJ,IAAI,CAACR,QAAQ,CAACS,aAAa,EAAE,EAAE;IAC7B,MAAMC,YAAY,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IACpDF,YAAY,CAACG,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC;IAC7CH,YAAY,CAACI,WAAW,GAAGV,OAAO;IAElC,MAAMW,IAAI,GAAGJ,QAAQ,CAACK,aAAa,CAAC,MAAM,CAAoB;IAC9D,IAAID,IAAI,EAAE;MACRA,IAAI,CAACE,YAAY,CAACP,YAAY,EAAEK,IAAI,CAACG,UAAU,CAAC;;IAGlDjB,UAAU,CAACkB,IAAI,CAAC;MACdhB,IAAI;MACJK,SAAS,EAAE,CAAC;MACZE;KACD,CAAC;;AAEN;AAEA,OAAM,SAAUU,KAAKA,CAACjB,IAAY;EAChC,MAAMkB,KAAK,GAAGpB,UAAU,CAACqB,SAAS,CAAEf,CAAC,IAAKA,CAAC,CAACJ,IAAI,KAAKA,IAAI,CAAC;EAE1D,IAAIkB,KAAK,GAAG,CAAC,CAAC,EAAE;IACd,MAAMhB,SAAS,GAAGJ,UAAU,CAACoB,KAAK,CAAC;IACnChB,SAAS,CAACG,SAAS,IAAI,CAAC;IACxB,IAAIH,SAAS,CAACG,SAAS,GAAG,CAAC,EAAE;MAC3B;;IAGF,IAAIE,YAAY,GAAGL,SAAS,CAACK,YAAY;IACzC,IAAIA,YAAY,IAAIA,YAAY,CAACa,UAAU,EAAE;MAC3Cb,YAAY,CAACa,UAAU,CAACC,WAAW,CAACd,YAAY,CAAC;;IAEnDA,YAAY,GAAG,IAAI;IACnBT,UAAU,CAACwB,MAAM,CAACJ,KAAK,EAAE,CAAC,CAAC;;AAE/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}