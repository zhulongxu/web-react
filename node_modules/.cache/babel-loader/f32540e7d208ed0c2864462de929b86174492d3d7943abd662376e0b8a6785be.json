{"ast":null,"code":"import { createSensor } from './sensors';\nexport var SizeSensor;\n(function (SizeSensor) {\n  const cache = new WeakMap();\n  function get(element) {\n    let sensor = cache.get(element);\n    if (sensor) {\n      return sensor;\n    }\n    sensor = createSensor(element);\n    cache.set(element, sensor);\n    return sensor;\n  }\n  function remove(sensor) {\n    sensor.destroy();\n    cache.delete(sensor.element);\n  }\n  SizeSensor.bind = (element, cb) => {\n    const sensor = get(element);\n    sensor.bind(cb);\n    return () => sensor.unbind(cb);\n  };\n  SizeSensor.clear = element => {\n    const sensor = get(element);\n    remove(sensor);\n  };\n})(SizeSensor || (SizeSensor = {}));","map":{"version":3,"names":["createSensor","SizeSensor","cache","WeakMap","get","element","sensor","set","remove","destroy","delete","bind","cb","unbind","clear"],"sources":["/home/devbox/project/node_modules/.pnpm/@antv+x6-common@2.0.17/node_modules/@antv/x6-common/src/size-sensor/index.ts"],"sourcesContent":["import { createSensor } from './sensors'\nimport { Sensor, Listener } from './sensors/types'\n\nexport namespace SizeSensor {\n  const cache: WeakMap<Element, Sensor> = new WeakMap()\n\n  function get(element: Element) {\n    let sensor = cache.get(element)\n    if (sensor) {\n      return sensor\n    }\n\n    sensor = createSensor(element)\n    cache.set(element, sensor)\n    return sensor\n  }\n\n  function remove(sensor: Sensor) {\n    sensor.destroy()\n    cache.delete(sensor.element)\n  }\n\n  export const bind = (element: Element, cb: Listener) => {\n    const sensor = get(element)\n    sensor.bind(cb)\n    return () => sensor.unbind(cb)\n  }\n\n  export const clear = (element: Element) => {\n    const sensor = get(element)\n    remove(sensor)\n  }\n}\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,WAAW;AAGxC,OAAM,IAAWC,UAAU;AAA3B,WAAiBA,UAAU;EACzB,MAAMC,KAAK,GAA6B,IAAIC,OAAO,EAAE;EAErD,SAASC,GAAGA,CAACC,OAAgB;IAC3B,IAAIC,MAAM,GAAGJ,KAAK,CAACE,GAAG,CAACC,OAAO,CAAC;IAC/B,IAAIC,MAAM,EAAE;MACV,OAAOA,MAAM;;IAGfA,MAAM,GAAGN,YAAY,CAACK,OAAO,CAAC;IAC9BH,KAAK,CAACK,GAAG,CAACF,OAAO,EAAEC,MAAM,CAAC;IAC1B,OAAOA,MAAM;EACf;EAEA,SAASE,MAAMA,CAACF,MAAc;IAC5BA,MAAM,CAACG,OAAO,EAAE;IAChBP,KAAK,CAACQ,MAAM,CAACJ,MAAM,CAACD,OAAO,CAAC;EAC9B;EAEaJ,UAAA,CAAAU,IAAI,GAAG,CAACN,OAAgB,EAAEO,EAAY,KAAI;IACrD,MAAMN,MAAM,GAAGF,GAAG,CAACC,OAAO,CAAC;IAC3BC,MAAM,CAACK,IAAI,CAACC,EAAE,CAAC;IACf,OAAO,MAAMN,MAAM,CAACO,MAAM,CAACD,EAAE,CAAC;EAChC,CAAC;EAEYX,UAAA,CAAAa,KAAK,GAAIT,OAAgB,IAAI;IACxC,MAAMC,MAAM,GAAGF,GAAG,CAACC,OAAO,CAAC;IAC3BG,MAAM,CAACF,MAAM,CAAC;EAChB,CAAC;AACH,CAAC,EA7BgBL,UAAU,KAAVA,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}