!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@antv/x6")):"function"==typeof define&&define.amd?define(["exports","@antv/x6"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).X6PluginStencil={},t.X6)}(this,(function(t,e){"use strict";function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function o(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r,a={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function l(){if(void 0!==r)return r;r="";var t=document.createElement("p").style;for(var e in a)e+"Transform"in t&&(r=e);return r}function c(){return l()?"".concat(l(),"TransitionProperty"):"transitionProperty"}function p(){return l()?"".concat(l(),"Transform"):"transform"}function d(t,e){var n=c();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function h(t,e){var n=p();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}var g,u=/matrix\((.*)\)/,f=/matrix3d\((.*)\)/;function m(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function x(t,e,n){var o=n;if("object"!==i(e))return void 0!==o?("number"==typeof o&&(o="".concat(o,"px")),void(t.style[e]=o)):g(t,e);for(var s in e)e.hasOwnProperty(s)&&x(t,s,e[s])}function w(t,e){var n=t["page".concat(e?"Y":"X","Offset")],o="scroll".concat(e?"Top":"Left");if("number"!=typeof n){var i=t.document;"number"!=typeof(n=i.documentElement[o])&&(n=i.body[o])}return n}function y(t){return w(t)}function b(t){return w(t,!0)}function v(t){var e=function(t){var e,n,o,i=t.ownerDocument,s=i.body,r=i&&i.documentElement;return e=t.getBoundingClientRect(),n=Math.floor(e.left),o=Math.floor(e.top),{left:n-=r.clientLeft||s.clientLeft||0,top:o-=r.clientTop||s.clientTop||0}}(t),n=t.ownerDocument,o=n.defaultView||n.parentWindow;return e.left+=y(o),e.top+=b(o),e}function D(t){return null!=t&&t==t.window}function C(t){return D(t)?t.document:9===t.nodeType?t:t.ownerDocument}var N=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),M=/^(top|right|bottom|left)$/,G="currentStyle",O="runtimeStyle",j="left",E="px";function T(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function S(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function L(t,e,n){"static"===x(t,"position")&&(t.style.position="relative");var o=-999,i=-999,s=T("left",n),r=T("top",n),a=S(s),l=S(r);"left"!==s&&(o=999),"top"!==r&&(i=999);var p,h="",g=v(t);("left"in e||"top"in e)&&(h=(p=t).style.transitionProperty||p.style[c()]||"",d(t,"none")),"left"in e&&(t.style[a]="",t.style[s]="".concat(o,"px")),"top"in e&&(t.style[l]="",t.style[r]="".concat(i,"px")),m(t);var u=v(t),f={};for(var w in e)if(e.hasOwnProperty(w)){var y=T(w,n),b="left"===w?o:i,D=g[w]-u[w];f[y]=y===w?b+D:b-D}x(t,f),m(t),("left"in e||"top"in e)&&d(t,h);var C={};for(var N in e)if(e.hasOwnProperty(N)){var M=T(N,n),G=e[N]-g[N];C[M]=N===M?f[M]+G:f[M]-G}x(t,C)}function P(t,e){var n=v(t),o=function(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(p());if(n&&"none"!==n){var o=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(o[12]||o[4],0),y:parseFloat(o[13]||o[5],0)}}return{x:0,y:0}}(t),i={x:o.x,y:o.y};"left"in e&&(i.x=o.x+e.left-n.left),"top"in e&&(i.y=o.y+e.top-n.top),function(t,e){var n=window.getComputedStyle(t,null),o=n.getPropertyValue("transform")||n.getPropertyValue(p());if(o&&"none"!==o){var i,s=o.match(u);s?((i=(s=s[1]).split(",").map((function(t){return parseFloat(t,10)})))[4]=e.x,i[5]=e.y,h(t,"matrix(".concat(i.join(","),")"))):((i=o.match(f)[1].split(",").map((function(t){return parseFloat(t,10)})))[12]=e.x,i[13]=e.y,h(t,"matrix3d(".concat(i.join(","),")")))}else h(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}(t,i)}function A(t,e){for(var n=0;n<t.length;n++)e(t[n])}function z(t){return"border-box"===g(t,"boxSizing")}"undefined"!=typeof window&&(g=window.getComputedStyle?function(t,e,n){var o=n,i="",s=C(t);return(o=o||s.defaultView.getComputedStyle(t,null))&&(i=o.getPropertyValue(e)||o[e]),i}:function(t,e){var n=t[G]&&t[G][e];if(N.test(n)&&!M.test(e)){var o=t.style,i=o[j],s=t[O][j];t[O][j]=t[G][j],o[j]="fontSize"===e?"1em":n||0,n=o.pixelLeft+E,o[j]=i,t[O][j]=s}return""===n?"auto":n});var k=["margin","border","padding"],I=-1,W=2,B=1;function H(t,e,n){var o,i,s,r=0;for(i=0;i<e.length;i++)if(o=e[i])for(s=0;s<n.length;s++){var a=void 0;a="border"===o?"".concat(o).concat(n[s],"Width"):o+n[s],r+=parseFloat(g(t,a))||0}return r}var V={getParent:function(t){var e=t;do{e=11===e.nodeType&&e.host?e.host:e.parentNode}while(e&&1!==e.nodeType&&9!==e.nodeType);return e}};function Y(t,e,n){var o=n;if(D(t))return"width"===e?V.viewportWidth(t):V.viewportHeight(t);if(9===t.nodeType)return"width"===e?V.docWidth(t):V.docHeight(t);var i="width"===e?["Left","Right"]:["Top","Bottom"],s="width"===e?Math.floor(t.getBoundingClientRect().width):Math.floor(t.getBoundingClientRect().height),r=z(t),a=0;(null==s||s<=0)&&(s=void 0,(null==(a=g(t,e))||Number(a)<0)&&(a=t.style[e]||0),a=Math.floor(parseFloat(a))||0),void 0===o&&(o=r?B:I);var l=void 0!==s||r,c=s||a;return o===I?l?c-H(t,["border","padding"],i):a:l?o===B?c:c+(o===W?-H(t,["border"],i):H(t,["margin"],i)):a+H(t,k.slice(o),i)}A(["Width","Height"],(function(t){V["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],V["viewport".concat(t)](n))},V["viewport".concat(t)]=function(e){var n="client".concat(t),o=e.document,i=o.body,s=o.documentElement[n];return"CSS1Compat"===o.compatMode&&s||i&&i[n]||s}}));var F={position:"absolute",visibility:"hidden",display:"block"};function R(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o,i=e[0];return 0!==i.offsetWidth?o=Y.apply(void 0,e):function(t,e,n){var o,i={},s=t.style;for(o in e)e.hasOwnProperty(o)&&(i[o]=s[o],s[o]=e[o]);for(o in n.call(t),e)e.hasOwnProperty(o)&&(s[o]=i[o])}(i,F,(function(){o=Y.apply(void 0,e)})),o}function U(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}A(["width","height"],(function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);V["outer".concat(e)]=function(e,n){return e&&R(e,t,n?0:B)};var n="width"===t?["Left","Right"]:["Top","Bottom"];V[t]=function(e,o){var i=o;return void 0!==i?e?(z(e)&&(i+=H(e,["padding","border"],n)),x(e,t,i)):void 0:e&&R(e,t,I)}}));var X={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},getDocument:C,offset:function(t,e,n){if(void 0===e)return v(t);!function(t,e,n){if(n.ignoreShake){var o=v(t),i=o.left.toFixed(0),s=o.top.toFixed(0),r=e.left.toFixed(0),a=e.top.toFixed(0);if(i===r&&s===a)return}n.useCssRight||n.useCssBottom?L(t,e,n):n.useCssTransform&&p()in document.body.style?P(t,e):L(t,e,n)}(t,e,n||{})},isWindow:D,each:A,css:x,clone:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);if(t.overflow)for(e in t)t.hasOwnProperty(e)&&(n.overflow[e]=t.overflow[e]);return n},mix:U,getWindowScrollLeft:function(t){return y(t)},getWindowScrollTop:function(t){return b(t)},merge:function(){for(var t={},e=0;e<arguments.length;e++)X.mix(t,e<0||arguments.length<=e?void 0:arguments[e]);return t},viewportWidth:0,viewportHeight:0};U(X,V);var Z=X.getParent;function $(t){if(X.isWindow(t)||9===t.nodeType)return null;var e,n=X.getDocument(t).body,o=X.css(t,"position");if(!("fixed"===o||"absolute"===o))return"html"===t.nodeName.toLowerCase()?null:Z(t);for(e=Z(t);e&&e!==n&&9!==e.nodeType;e=Z(e))if("static"!==(o=X.css(e,"position")))return e;return null}var J=X.getParent;function Q(t,e){for(var n={left:0,right:1/0,top:0,bottom:1/0},o=$(t),i=X.getDocument(t),s=i.defaultView||i.parentWindow,r=i.body,a=i.documentElement;o;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===o.clientWidth||o===r||o===a||"visible"===X.css(o,"overflow")){if(o===r||o===a)break}else{var l=X.offset(o);l.left+=o.clientLeft,l.top+=o.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+o.clientWidth),n.bottom=Math.min(n.bottom,l.top+o.clientHeight),n.left=Math.max(n.left,l.left)}o=$(o)}var c=null;X.isWindow(t)||9===t.nodeType||(c=t.style.position,"absolute"===X.css(t,"position")&&(t.style.position="fixed"));var p=X.getWindowScrollLeft(s),d=X.getWindowScrollTop(s),h=X.viewportWidth(s),g=X.viewportHeight(s),u=a.scrollWidth,f=a.scrollHeight,m=window.getComputedStyle(r);if("hidden"===m.overflowX&&(u=s.innerWidth),"hidden"===m.overflowY&&(f=s.innerHeight),t.style&&(t.style.position=c),e||function(t){if(X.isWindow(t)||9===t.nodeType)return!1;var e=X.getDocument(t),n=e.body,o=null;for(o=J(t);o&&o!==n&&o!==e;o=J(o))if("fixed"===X.css(o,"position"))return!0;return!1}(t))n.left=Math.max(n.left,p),n.top=Math.max(n.top,d),n.right=Math.min(n.right,p+h),n.bottom=Math.min(n.bottom,d+g);else{var x=Math.max(u,p+h);n.right=Math.min(n.right,x);var w=Math.max(f,d+g);n.bottom=Math.min(n.bottom,w)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function _(t,e){var n=e.charAt(0),o=e.charAt(1),i=t.width,s=t.height,r=t.left,a=t.top;return"c"===n?a+=s/2:"b"===n&&(a+=s),"c"===o?r+=i/2:"r"===o&&(r+=i),{left:r,top:a}}function q(t,e,n,o,i){var s=_(e,n[1]),r=_(t,n[0]),a=[r.left-s.left,r.top-s.top];return{left:Math.round(t.left-a[0]+o[0]-i[0]),top:Math.round(t.top-a[1]+o[1]-i[1])}}function K(t,e,n){return t.left<n.left||t.left+e.width>n.right}function tt(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function et(t,e,n){var o=[];return X.each(t,(function(t){o.push(t.replace(e,(function(t){return n[t]})))})),o}function nt(t,e){return t[e]=-t[e],t}function ot(t,e){return(/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10))||0}function it(t,e){t[0]=ot(t[0],e.width),t[1]=ot(t[1],e.height)}function st(t,e,n,o){var i=n.points,s=n.offset||[0,0],r=n.targetOffset||[0,0],a=n.overflow,l=n.source||t;s=[].concat(s),r=[].concat(r);var c={},p=0,d=Q(l,!(!(a=a||{})||!a.alwaysByViewport)),h=function(t){var e,n,o;if(X.isWindow(t)||9===t.nodeType){var i=X.getWindow(t);e={left:X.getWindowScrollLeft(i),top:X.getWindowScrollTop(i)},n=X.viewportWidth(i),o=X.viewportHeight(i)}else e=X.offset(t),n=X.outerWidth(t),o=X.outerHeight(t);return e.width=n,e.height=o,e}(l);it(s,h),it(r,e);var g=q(h,e,i,s,r),u=X.merge(h,g);if(d&&(a.adjustX||a.adjustY)&&o){if(a.adjustX&&K(g,h,d)){var f=et(i,/[lr]/gi,{l:"r",r:"l"}),m=nt(s,0),x=nt(r,0);(function(t,e,n){return t.left>n.right||t.left+e.width<n.left})(q(h,e,f,m,x),h,d)||(p=1,i=f,s=m,r=x)}if(a.adjustY&&tt(g,h,d)){var w=et(i,/[tb]/gi,{t:"b",b:"t"}),y=nt(s,1),b=nt(r,1);(function(t,e,n){return t.top>n.bottom||t.top+e.height<n.top})(q(h,e,w,y,b),h,d)||(p=1,i=w,s=y,r=b)}p&&(g=q(h,e,i,s,r),X.mix(u,g));var v=K(g,h,d),D=tt(g,h,d);if(v||D){var C=i;v&&(C=et(i,/[lr]/gi,{l:"r",r:"l"})),D&&(C=et(i,/[tb]/gi,{t:"b",b:"t"})),i=C,s=n.offset||[0,0],r=n.targetOffset||[0,0]}c.adjustX=a.adjustX&&v,c.adjustY=a.adjustY&&D,(c.adjustX||c.adjustY)&&(u=function(t,e,n,o){var i=X.clone(t),s={width:e.width,height:e.height};return o.adjustX&&i.left<n.left&&(i.left=n.left),o.resizeWidth&&i.left>=n.left&&i.left+s.width>n.right&&(s.width-=i.left+s.width-n.right),o.adjustX&&i.left+s.width>n.right&&(i.left=Math.max(n.right-s.width,n.left)),o.adjustY&&i.top<n.top&&(i.top=n.top),o.resizeHeight&&i.top>=n.top&&i.top+s.height>n.bottom&&(s.height-=i.top+s.height-n.bottom),o.adjustY&&i.top+s.height>n.bottom&&(i.top=Math.max(n.bottom-s.height,n.top)),X.mix(i,s)}(g,h,d,c))}return u.width!==h.width&&X.css(l,"width",X.width(l)+u.width-h.width),u.height!==h.height&&X.css(l,"height",X.height(l)+u.height-h.height),X.offset(l,{left:u.left,top:u.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:s,targetOffset:r,overflow:c}}var rt,at=function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};class lt extends e.View{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}get snapline(){return this.options.target.getPlugin("snapline")}constructor(t){super(),this.name="dnd",this.options=Object.assign(Object.assign({},lt.defaults),t),this.init()}init(){e.CssLoader.ensure(this.name,".x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n"),this.container=document.createElement("div"),e.Dom.addClass(this.container,this.prefixClassName("widget-dnd")),this.draggingGraph=new e.Graph(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1,async:!1})),e.Dom.append(this.container,this.draggingGraph.container)}start(t,n){const o=n;o.preventDefault(),this.targetModel.startBatch("dnd"),e.Dom.addClass(this.container,"dragging"),e.Dom.appendTo(this.container,this.options.draggingContainer||document.body),this.sourceNode=t,this.prepareDragging(t,o.clientX,o.clientY);const i=this.updateNodePosition(o.clientX,o.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:o,node:t,cell:t,view:this.draggingView,x:i.x,y:i.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(lt.documentEvents,o.data)}isSnaplineEnabled(){return this.snapline&&this.snapline.isEnabled()}prepareDragging(t,e,n){const o=this.draggingGraph,i=o.model,s=this.options.getDragNode(t,{sourceNode:t,draggingGraph:o,targetGraph:this.targetGraph});s.position(0,0);let r=5;if(this.isSnaplineEnabled()&&(r+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const t=this.targetGraph.transform.getScale();o.scale(t.sx,t.sy),r*=Math.max(t.sx,t.sy)}else o.scale(1,1);this.clearDragging(),i.resetCells([s]);const a=o.findViewByCell(s);a.undelegateEvents(),a.cell.off("changed"),o.fitToContent({padding:r,allowNewOrigin:"any",useCellGeometry:!1});const l=a.getBBox();this.geometryBBox=a.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(l.getTopLeft()),this.draggingNode=s,this.draggingView=a,this.draggingBBox=s.getBBox(),this.padding=r,this.updateGraphPosition(e,n)}updateGraphPosition(t,e){const n=this.delta,i=this.geometryBBox,s=this.padding||5,r={left:t-n.x-i.width/2-s,top:e-n.y-i.height/2-s};var a,l,c,p,d,h,g,u,f,m,x,w,y,b;this.draggingGraph&&(a=this.container,l={clientX:r.left,clientY:r.top},c={points:["tl"]},h=X.getDocument(a),g=h.defaultView||h.parentWindow,u=X.getWindowScrollLeft(g),f=X.getWindowScrollTop(g),m=X.viewportWidth(g),x=X.viewportHeight(g),w={left:p="pageX"in l?l.pageX:u+l.clientX,top:d="pageY"in l?l.pageY:f+l.clientY,width:0,height:0},y=p>=0&&p<=u+m&&d>=0&&d<=f+x,b=[c.points[0],"cc"],st(a,w,o(o({},c),{},{points:b}),y))}updateNodePosition(t,e){const n=this.targetGraph.clientToLocal(t,e),o=this.draggingBBox;return n.x-=o.width/2,n.y-=o.height/2,this.draggingNode.position(n.x,n.y),n}snap({cell:t,current:e,options:n}){const o=t;if(n.snapped){const t=this.draggingBBox;o.position(t.x+n.tx,t.y+n.ty,{silent:!0}),this.draggingView.translate(),o.position(e.x,e.y,{silent:!0}),this.snapOffset={x:n.tx,y:n.ty}}else this.snapOffset=null}onDragging(t){const e=this.draggingView;if(e){t.preventDefault();const n=this.normalizeEvent(t),o=n.clientX,i=n.clientY;this.updateGraphPosition(o,i);const s=this.updateNodePosition(o,i),r=this.targetGraph.options.embedding.enabled,a=(r||this.isSnaplineEnabled())&&this.isInsideValidArea({x:o,y:i});if(r){e.setEventData(n,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const t=e.getEventData(n);a?e.processEmbedding(n,t):e.clearEmbedding(t),this.candidateEmbedView=t.candidateEmbedView}this.isSnaplineEnabled()&&(a?this.snapline.snapOnMoving({e:n,view:e,x:s.x,y:s.y}):this.snapline.hide())}}onDragEnd(t){const n=this.draggingNode;if(n){const o=this.normalizeEvent(t),i=this.draggingView,s=this.draggingBBox,r=this.snapOffset;let a=s.x,l=s.y;r&&(a+=r.x,l+=r.y),n.position(a,l,{silent:!0});const c=this.drop(n,{x:o.clientX,y:o.clientY}),p=t=>{t?(this.onDropped(n),this.targetGraph.options.embedding.enabled&&i&&(i.setEventData(o,{cell:t,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),i.finalizeEmbedding(o,i.getEventData(o)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};e.FunctionExt.isAsync(c)?(this.undelegateDocumentEvents(),c.then(p)):p(c)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.undelegateDocumentEvents())}onDropped(t){this.draggingNode===t&&(this.clearDragging(),e.Dom.removeClass(this.container,"dragging"),e.Dom.remove(this.container))}onDropInvalid(){const t=this.draggingNode;t&&this.onDropped(t)}isInsideValidArea(t){let e,n=null;const o=this.targetGraph,i=this.targetScroller;this.options.dndContainer&&(n=this.getDropArea(this.options.dndContainer));const s=n&&n.containsPoint(t);if(i)if(i.options.autoResize)e=this.getDropArea(i.container);else{const t=this.getDropArea(i.container);e=this.getDropArea(o.container).intersectsWithRect(t)}else e=this.getDropArea(o.container);return!s&&e&&e.containsPoint(t)}getDropArea(t){const n=e.Dom.offset(t),o=document.body.scrollTop||document.documentElement.scrollTop,i=document.body.scrollLeft||document.documentElement.scrollLeft;return e.Rectangle.create({x:n.left+parseInt(e.Dom.css(t,"border-left-width"),10)-i,y:n.top+parseInt(e.Dom.css(t,"border-top-width"),10)-o,width:t.clientWidth,height:t.clientHeight})}drop(t,n){if(this.isInsideValidArea(n)){const o=this.targetGraph,i=o.model,s=o.clientToLocal(n),r=this.sourceNode,a=this.options.getDropNode(t,{sourceNode:r,draggingNode:t,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),l=a.getBBox();s.x+=l.x-l.width/2,s.y+=l.y-l.height/2;const c=this.snapOffset?1:o.getGridSize();a.position(e.GeometryUtil.snapToGrid(s.x,c),e.GeometryUtil.snapToGrid(s.y,c)),a.removeZIndex();const p=this.options.validateNode,d=!p||p(a,{sourceNode:r,draggingNode:t,droppingNode:a,targetGraph:o,draggingGraph:this.draggingGraph});return"boolean"==typeof d?d?(i.addCell(a,{stencil:this.cid}),a):null:e.FunctionExt.toDeferredBoolean(d).then((t=>t?(i.addCell(a,{stencil:this.cid}),a):null))}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove(),e.CssLoader.clean(this.name)}}at([e.View.dispose()],lt.prototype,"dispose",null),function(t){t.defaults={getDragNode:t=>t.clone(),getDropNode:t=>t.clone()},t.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(lt||(lt={})),function(t){t.getMaxDim=function(t,e){return t.reduce(((t,n)=>Math.max(null==n?void 0:n.getSize()[e],t)),0)},t.getNodesInRow=function(t,e,n){const o=[];for(let i=n*e,s=i+n;i<s;i+=1)t[i]&&o.push(t[i]);return o},t.getNodesInColumn=function(t,e,n){const o=[];for(let i=e,s=t.length;i<s;i+=n)t[i]&&o.push(t[i]);return o},t.accumulate=function(t,e){return t.reduce(((t,e,n)=>(t.push(t[n]+e),t)),[e||0])}}(rt||(rt={}));class ct extends e.View{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}constructor(t={}){super(),this.name="stencil",e.CssLoader.ensure(this.name,".x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n"),this.graphs={},this.groups={},this.options=Object.assign(Object.assign({},ct.defaultOptions),t),this.init()}init(){this.dnd=new lt(this.options),this.onSearch=e.FunctionExt.debounce(this.onSearch,200),this.initContainer(),this.initSearch(),this.initContent(),this.initGroups(),this.setTitle(),this.startListening()}load(t,e){return Array.isArray(t)?this.loadGroup(t,e):this.options.groups&&Object.keys(this.options.groups).forEach((e=>{t[e]&&this.loadGroup(t[e],e)})),this}unload(t,e){return Array.isArray(t)?this.loadGroup(t,e,!0):this.options.groups&&Object.keys(this.options.groups).forEach((e=>{t[e]&&this.loadGroup(t[e],e,!0)})),this}toggleGroup(t){return this.isGroupCollapsed(t)?this.expandGroup(t):this.collapseGroup(t),this}collapseGroup(t){if(this.isGroupCollapsable(t)){const n=this.groups[t];n&&!this.isGroupCollapsed(t)&&(this.trigger("group:collapse",{name:t}),e.Dom.addClass(n,"collapsed"))}return this}expandGroup(t){if(this.isGroupCollapsable(t)){const n=this.groups[t];n&&this.isGroupCollapsed(t)&&(this.trigger("group:expand",{name:t}),e.Dom.removeClass(n,"collapsed"))}return this}isGroupCollapsable(t){const n=this.groups[t];return e.Dom.hasClass(n,"collapsable")}isGroupCollapsed(t){const n=this.groups[t];return n&&e.Dom.hasClass(n,"collapsed")}collapseGroups(){return Object.keys(this.groups).forEach((t=>this.collapseGroup(t))),this}expandGroups(){return Object.keys(this.groups).forEach((t=>this.expandGroup(t))),this}resizeGroup(t,e){const n=this.graphs[t];return n&&n.resize(e.width,e.height),this}addGroup(t){const e=Array.isArray(t)?t:[t];this.options.groups?this.options.groups.push(...e):this.options.groups=e,e.forEach((t=>this.initGroup(t)))}removeGroup(t){const n=Array.isArray(t)?t:[t];this.options.groups&&(this.options.groups=this.options.groups.filter((t=>!n.includes(t.name))),n.forEach((t=>{const n=this.graphs[t];this.unregisterGraphEvents(n),n.dispose(),delete this.graphs[t];const o=this.groups[t];e.Dom.remove(o),delete this.groups[t]})))}initContainer(){this.container=document.createElement("div"),e.Dom.addClass(this.container,this.prefixClassName(pt.base)),e.Dom.attr(this.container,"data-not-found-text",this.options.notFoundText||"No matches found")}initContent(){this.content=document.createElement("div"),e.Dom.addClass(this.content,this.prefixClassName(pt.content)),e.Dom.appendTo(this.content,this.container)}initSearch(){this.options.search&&(e.Dom.addClass(this.container,"searchable"),e.Dom.append(this.container,this.renderSearch()))}initGroup(t){const n=this.options.stencilGraphOptions||{},o=document.createElement("div");e.Dom.addClass(o,this.prefixClassName(pt.group)),e.Dom.attr(o,"data-name",t.name),(null==t.collapsable&&this.options.collapsable||!1!==t.collapsable)&&e.Dom.addClass(o,"collapsable"),e.Dom.toggleClass(o,"collapsed",!0===t.collapsed);const i=document.createElement("h3");e.Dom.addClass(i,this.prefixClassName(pt.groupTitle)),i.innerHTML=t.title||t.name;const s=document.createElement("div");e.Dom.addClass(s,this.prefixClassName(pt.groupContent));const r=t.graphOptions,a=new e.Graph(Object.assign(Object.assign(Object.assign({},n),r),{container:document.createElement("div"),model:n.model||new e.Model,width:t.graphWidth||this.options.stencilGraphWidth,height:t.graphHeight||this.options.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.registerGraphEvents(a),e.Dom.append(s,a.container),e.Dom.append(o,[i,s]),e.Dom.appendTo(o,this.content),this.groups[t.name]=o,this.graphs[t.name]=a}initGroups(){if(this.clearGroups(),this.setCollapsableState(),this.options.groups&&this.options.groups.length)this.options.groups.forEach((t=>{this.initGroup(t)}));else{const t=this.options.stencilGraphOptions||{},n=new e.Graph(Object.assign(Object.assign({},t),{container:document.createElement("div"),model:t.model||new e.Model,width:this.options.stencilGraphWidth,height:this.options.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));e.Dom.append(this.content,n.container),this.graphs[dt.defaultGroupName]=n}}setCollapsableState(){if(this.options.collapsable=this.options.collapsable&&this.options.groups&&this.options.groups.some((t=>!1!==t.collapsable)),this.options.collapsable){e.Dom.addClass(this.container,"collapsable");this.options.groups&&this.options.groups.every((t=>t.collapsed||!1===t.collapsable))?e.Dom.addClass(this.container,"collapsed"):e.Dom.removeClass(this.container,"collapsed")}else e.Dom.removeClass(this.container,"collapsable")}setTitle(){const t=document.createElement("div");e.Dom.addClass(t,this.prefixClassName(pt.title)),t.innerHTML=this.options.title,e.Dom.appendTo(t,this.container)}renderSearch(){const t=document.createElement("div");e.Dom.addClass(t,this.prefixClassName(pt.search));const n=document.createElement("input");return e.Dom.attr(n,{type:"search",placeholder:this.options.placeholder||"Search"}),e.Dom.addClass(n,this.prefixClassName(pt.searchText)),e.Dom.append(t,n),t}startListening(){const t=this.prefixClassName(pt.title),e=this.prefixClassName(pt.searchText),n=this.prefixClassName(pt.groupTitle);this.delegateEvents({[`click .${t}`]:"onTitleClick",[`touchstart .${t}`]:"onTitleClick",[`click .${n}`]:"onGroupTitleClick",[`touchstart .${n}`]:"onGroupTitleClick",[`input .${e}`]:"onSearch",[`focusin .${e}`]:"onSearchFocusIn",[`focusout .${e}`]:"onSearchFocusOut"})}stopListening(){this.undelegateEvents()}registerGraphEvents(t){t.on("cell:mousedown",this.onDragStart,this)}unregisterGraphEvents(t){t.off("cell:mousedown",this.onDragStart,this)}loadGroup(t,n,o){const i=this.getModel(n);if(i){const n=t.map((t=>e.Node.isNode(t)?t:e.Node.create(t)));!0===o?i.removeCells(n):i.resetCells(n)}const s=this.getGroup(n);let r=this.options.stencilGraphHeight;s&&null!=s.graphHeight&&(r=s.graphHeight);const a=s&&s.layout||this.options.layout;if(a&&i&&e.FunctionExt.call(a,this,i,s),!r){const t=this.getGraph(n);t.fitToContent({minWidth:t.options.width,gridHeight:1,padding:s&&s.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(t){const{e:e,node:n}=t,o=this.getGroupByNode(n);o&&!1===o.nodeMovable||this.dnd.start(n,e)}filter(t,n){const o=Object.keys(this.graphs).reduce(((o,i)=>{const s=this.graphs[i],r=i===dt.defaultGroupName?null:i,a=s.model.getNodes().filter((o=>{let i=!1;i="function"==typeof n?e.FunctionExt.call(n,this,o,t,r,this):"boolean"==typeof n?n:this.isCellMatched(o,t,n,t.toLowerCase()!==t);const a=s.renderer.findViewByCell(o);return a&&e.Dom.toggleClass(a.container,"unmatched",!i),i})),l=a.length>0,c=this.options,p=new e.Model;return p.resetCells(a),c.layout&&e.FunctionExt.call(c.layout,this,p,this.getGroup(i)),this.groups[i]&&e.Dom.toggleClass(this.groups[i],"unmatched",!l),s.fitToContent({gridWidth:1,gridHeight:1,padding:c.stencilGraphPadding||10}),o||l}),!1);e.Dom.toggleClass(this.container,"not-found",!o)}isCellMatched(t,e,n,o){return!e||!n||Object.keys(n).some((i=>{if("*"===i||t.shape===i){const s=n[i];if("boolean"==typeof s)return s;return(Array.isArray(s)?s:[s]).some((n=>{let i=t.getPropByPath(n);return null!=i&&(i=`${i}`,o||(i=i.toLowerCase()),i.indexOf(e)>=0)}))}return!1}))}onSearch(t){this.filter(t.target.value,this.options.search)}onSearchFocusIn(){e.Dom.addClass(this.container,"is-focused")}onSearchFocusOut(){e.Dom.removeClass(this.container,"is-focused")}onTitleClick(){this.options.collapsable&&(e.Dom.toggleClass(this.container,"collapsed"),e.Dom.hasClass(this.container,"collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(t){const n=t.target.closest(`.${this.prefixClassName(pt.group)}`);n&&this.toggleGroup(e.Dom.attr(n,"data-name")||"");const o=Object.keys(this.groups).every((t=>{const n=this.getGroup(t),o=this.groups[t];return n&&!1===n.collapsable||e.Dom.hasClass(o,"collapsed")}));e.Dom.toggleClass(this.container,"collapsed",o)}getModel(t){const e=this.getGraph(t);return e?e.model:null}getGraph(t){return this.graphs[t||dt.defaultGroupName]}getGroup(t){const e=this.options.groups;return null!=t&&e&&e.length?e.find((e=>e.name===t)):null}getGroupByNode(t){const e=this.options.groups;return e?e.find((e=>{const n=this.getModel(e.name);return!!n&&n.has(t.id)})):null}clearGroups(){Object.keys(this.graphs).forEach((t=>{const e=this.graphs[t];this.unregisterGraphEvents(e),e.dispose()})),Object.keys(this.groups).forEach((t=>{const n=this.groups[t];e.Dom.remove(n)})),this.graphs={},this.groups={}}onRemove(){this.clearGroups(),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}dispose(){this.remove(),e.CssLoader.clean(this.name)}}var pt,dt;!function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);s>3&&r&&Object.defineProperty(e,n,r)}([e.View.dispose()],ct.prototype,"dispose",null),function(t){t.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(t,n){const o={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};!function(t,n={}){const o=e.Model.isModel(t)?t:(new e.Model).resetCells(t,{sort:!1,dryrun:!0}),i=o.getNodes(),s=n.columns||1,r=Math.ceil(i.length/s),a=n.dx||0,l=n.dy||0,c=!1!==n.center,p=!0===n.resizeToFit,d=n.marginX||0,h=n.marginY||0,g=[];let u=n.columnWidth;if("compact"===u)for(let t=0;t<s;t+=1){const e=rt.getNodesInColumn(i,t,s);g.push(rt.getMaxDim(e,"width")+a)}else{null!=u&&"auto"!==u||(u=rt.getMaxDim(i,"width")+a);for(let t=0;t<s;t+=1)g.push(u)}const f=rt.accumulate(g,d),m=[];let x=n.rowHeight;if("compact"===x)for(let t=0;t<r;t+=1){const e=rt.getNodesInRow(i,t,s);m.push(rt.getMaxDim(e,"height")+l)}else{null!=x&&"auto"!==x||(x=rt.getMaxDim(i,"height")+l);for(let t=0;t<r;t+=1)m.push(x)}const w=rt.accumulate(m,h);o.startBatch("layout"),i.forEach(((t,e)=>{const o=e%s,i=Math.floor(e/s),r=g[o],d=m[i];let h=0,u=0,x=t.getSize();if(p){let e=r-2*a,o=d-2*l;const i=x.height*(x.width?e/x.width:1),s=x.width*(x.height?o/x.height:1);d<i?e=s:o=i,x={width:e,height:o},t.setSize(x,n)}c&&(h=(r-x.width)/2,u=(d-x.height)/2),t.position(f[o]+a+h,w[i]+l+u,n)})),o.stopBatch("layout")}(t,Object.assign(Object.assign(Object.assign({},o),this.options.layoutOptions),n?n.layoutOptions:{}))}},lt.defaults)}(ct||(ct={})),function(t){t.base="widget-stencil",t.title=`${t.base}-title`,t.search=`${t.base}-search`,t.searchText=`${t.search}-text`,t.content=`${t.base}-content`,t.group=`${t.base}-group`,t.groupTitle=`${t.group}-title`,t.groupContent=`${t.group}-content`}(pt||(pt={})),function(t){t.defaultGroupName="__default__"}(dt||(dt={})),t.Stencil=ct}));
//# sourceMappingURL=index.js.map
